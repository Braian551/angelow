:root {
	--hub-bg: #f7f9fc;
	--hub-card: rgba(255, 255, 255, 0.94);
	--hub-border: rgba(15, 23, 42, 0.08);
	--hub-border-strong: rgba(15, 23, 42, 0.18);
	--hub-shadow: 0 18px 46px rgba(8, 18, 34, 0.09);
	--hub-shadow-hover: 0 26px 60px rgba(8, 18, 34, 0.13);
	--hub-muted: #64748b;
	--hub-muted-strong: #475569;
	--hub-text: #0f172a;
	--hub-primary: var(--primary-color, #0077b6);
	--hub-primary-soft: rgba(0, 119, 182, 0.12);
	--hub-success: #0f9d58;
	--hub-warning: #f59e0b;
	--hub-danger: #dc2626;
	--hub-radius: 22px;
	--hub-transition: 0.32s cubic-bezier(0.4, 0, 0.2, 1);
	--hub-blur: 24px;
	/* Colores principales */
	--primary-color: #0077b6;
	/* Azul principal */
	--primary-hover: #015e90;
	--primary-light: #90e0ef;
	/* Azul claro */
	--primary-lightest: #dbeafe;

	/* Colores de estado */
	--error-color: #dc2626;
	--error-hover: #b91c1c;
	--error-light: #fecaca;
	--success-color: #16a34a;
	--success-light: #bbf7d0;
	--warning-color: #d97706;
	--warning-light: #fde68a;
	--info-color: #0284c7;
	--info-light: #bae6fd;

	/* Colores de texto */
	--text-dark: #111111;
	/* Texto oscuro */
	--text-medium: #4b5563;
	--text-light: #6b7280;
	--text-lighter: #9ca3af;
	--text-white: #f9fafb;

	/* Fondos */
	--bg-dark: #f3f4f6;
	--bg-light: #ffffff;
	--bg-hover: #f9fafb;
	--bg-card: rgba(255, 255, 255, 0.95);

	/* Bordes */
	--border-color: #e5e7eb;
	--border-dark: #d1d5db;
	--border-light: #f3f4f6;

	/* Sombras */
	--shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.03);
	--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.05);
	--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
	--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
	--shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.05);

	/* Efectos de glassmorfismo */
	--glass-bg: rgba(255, 255, 255, 0.85);
	--glass-border: rgba(255, 255, 255, 0.18);
	--glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);

	/* Transiciones */
	--transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
	--transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
	--transition-slow: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
	--transition-bounce: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);

	/* Bordes redondeados */
	--radius-sm: 6px;
	--radius-md: 10px;
	--radius-lg: 14px;
	--radius-xl: 18px;
	--radius-full: 9999px;

	/* Espaciado */
	--space-xs: 0.5rem;
	--space-sm: 1rem;
	--space-md: 1.5rem;
	--space-lg: 2rem;
	--space-xl: 3rem;
	--space-2xl: 4rem;
}

.management-hub {
	min-height: 100vh;
	padding: clamp(1.6rem, 2vw, 2.4rem);
	/* Use a single solid background to keep the UI minimal and clean */
	background: var(--hub-bg);
	display: flex;
	flex-direction: column;
	gap: 1.8rem;
}

.page-header {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	flex-wrap: wrap;
	gap: 1rem;
	padding: 1.4rem;
	border-radius: var(--hub-radius);
	backdrop-filter: blur(var(--hub-blur));
	background: var(--hub-card);
	border: 1px solid var(--hub-border);
	box-shadow: var(--hub-shadow);
}

.page-header h1 {
	display: flex;
	align-items: center;
	gap: 0.8rem;
	font-size: clamp(1.8rem, 2vw, 2.2rem);
	color: var(--hub-text);
}

.page-header h1 i {
	color: var(--primary-color);
	font-size: 2rem;
	width: 3rem;
	height: 3rem;
	display: flex;
	align-items: center;
	justify-content: center;
	background-color: var(--primary-lightest);
	border-radius: var(--radius-md);
	padding: var(--space-xs);
	box-shadow: var(--shadow-sm);
	transition: var(--transition);
}

.page-header h1:hover i {
	transform: scale(1.1);
	box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.2), 0 2px 4px -1px rgba(37, 99, 235, 0.1);
}

.page-header p {
	color: var(--hub-muted);
	font-size: 1.1rem;
	margin-top: 0.35rem;
}

.page-header .actions {
	display: flex;
	gap: 0.75rem;
	flex-wrap: wrap;
}

.btn-soft {
	border: 1px solid var(--hub-border);
	border-radius: 999px;
	padding: 0.55rem 1.2rem;
	display: inline-flex;
	align-items: center;
	gap: 0.45rem;
	font-weight: 600;
	background: #fff;
	color: var(--hub-muted-strong);
	box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
	transition: var(--hub-transition);
}

.btn-soft.primary {
	background: var(--hub-primary);
	color: #fff;
	border-color: transparent;
}

.btn-soft:hover {
	transform: translateY(-2px);
	box-shadow: var(--hub-shadow-hover);
}

/* ======== GRID SYSTEM ======== */
.insights-grid,
.split-grid,
.client-charts {
	display: grid;
	gap: 1.4rem;
}

.insights-grid {
	/* Improved column sizing so cards don't grow excessively on large
	   screens. Use minmax for predictable upper bounds and a smaller
	   first column so the large ticket card doesn't consume the full row. */
	grid-template-columns: minmax(280px, 1.3fr) minmax(220px, 1fr) minmax(220px, 1fr);
	grid-auto-flow: row dense;
	grid-auto-rows: minmax(120px, auto);
	justify-content: stretch;
	align-items: start;
	gap: 1rem 1.4rem;
	width: 100%;
	max-width: none;
	margin-inline: 0;
}

/* Explicitly position stat cards to improve predictability and make the
   header visually similar to the previous horizontal layout. These placements
   only apply in larger viewports — they're reverted at smaller widths below. */
.insights-grid > .stat-card[data-metric="total"] { grid-column: 1; grid-row: 1; }
.insights-grid > .stat-card[data-metric="new"] { grid-column: 2; grid-row: 1; }
.insights-grid > .stat-card[data-metric="active"] { grid-column: 3; grid-row: 1; }
.insights-grid > .stat-card[data-metric="ticket"] { grid-column: 1 / span 2; grid-row: 2; max-width: 920px; }
.insights-grid > .stat-card[data-metric="repeat"] { grid-column: 3; grid-row: 2; }
.insights-grid > .stat-card[data-metric="ltv"] { grid-column: 1; grid-row: 3; }

@media (max-width: 1160px) {
	/* On smaller screens revert to a 2-column flow so cards stack naturally. */
	.insights-grid > .stat-card[data-metric="total"],
	.insights-grid > .stat-card[data-metric="new"],
	.insights-grid > .stat-card[data-metric="active"],
	.insights-grid > .stat-card[data-metric="ticket"],
	.insights-grid > .stat-card[data-metric="repeat"],
	.insights-grid > .stat-card[data-metric="ltv"] {
		grid-column: auto; grid-row: auto;
	}
}

/* Explicit placement for predictable layout: 3 columns */
/* Allow implicit placement and `grid-auto-flow: row dense` to place cards naturally. */

.insights-grid > .stat-card { min-height: 140px; padding: 1.35rem 1.9rem; width: 100%; justify-self: stretch; }

/* Prevent normal-sized cards from growing too wide: keep them readable and
	aligned to the left column area. Large cards still span two columns. */
.insights-grid > .stat-card:not(.large) { max-width: 520px; justify-self: start; }
.insights-grid > .stat-card h2 { margin-top: 0; }

.split-grid {
	grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
}

/* Layout for table + detail page specifically: wider table with a detail panel column */
.split-grid.layout-table-detail {
	grid-template-columns: 1fr minmax(320px, 420px);
	gap: 1.6rem;
	align-items: start;
}

.client-charts {
	grid-template-columns: minmax(0, 1.8fr) minmax(320px, 1fr);
}

@media (max-width: 1080px) {
	.client-charts {
		grid-template-columns: 1fr;
	}
}

/* Responsive rules for the top stat cards */
@media (max-width: 1160px) {
	/* Use auto-fit so cards fill the available width and avoid outer gaps */
	.insights-grid { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1rem 1.4rem; }
}

@media (max-width: 900px) {
	/* On narrow screens, don't constrain card widths so they can fill 100% */
	.insights-grid > .stat-card:not(.large) { max-width: none; justify-self: stretch; }
}

/* Limit the cards from becoming extremely wide on very large screens by
   constraining the maximum width for the whole grid to match common layout
   widths used across the admin. This keeps cards readable and aligned with
   other content, while still allowing the grid to adapt on smaller screens. */
@media (min-width: 1400px) {
	.insights-grid { grid-template-columns: minmax(320px, 1.2fr) minmax(240px, 1fr) minmax(240px, 1fr); }
	.insights-grid > .stat-card[data-metric="ticket"] { max-width: 1120px; }
}
@media (max-width: 760px) {
	.insights-grid { grid-template-columns: 1fr; }
	.stat-card { min-height: 140px; }
}

/* ======== CARD BASE ======== */
.stat-card,
.surface-card,
.table-card,
.detail-panel,
.chart-card,
.timeline-card,
.form-card {
	border-radius: var(--hub-radius);
	background: var(--hub-card);
	border: 1px solid var(--hub-border);
	box-shadow: var(--hub-shadow);
	padding: clamp(1.4rem, 1.5vw, 2rem);
	position: relative;
	overflow: hidden;
	backdrop-filter: blur(var(--hub-blur));
	transition: transform var(--hub-transition), box-shadow var(--hub-transition), opacity 0.25s ease;
}

/* Keep stat cards compact and consistent */
.stat-card {
	/* Allow stat cards to stretch inside the grid cell for a more horizontal
	   appearance. Keep the centered content and comfortable padding. */
	min-width: 220px;
	max-width: none; /* let the grid control width, not the card */
	width: 100%;
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	text-align: center;
	min-height: 140px;
}

.stat-card::after,
.surface-card::after,
.table-card::after,
.detail-panel::after,
.chart-card::after {
	content: '';
	position: absolute;
	inset: 1px;
	border-radius: inherit;
	border: 1px solid rgba(255, 255, 255, 0.28);
	pointer-events: none;
}

.stat-card:hover,
.surface-card:hover,
.table-card:hover,
.detail-panel:hover,
.chart-card:hover {
	transform: translateY(-4px);
	box-shadow: var(--hub-shadow-hover);
}

/* ======== STAT CARDS ======== */
.stat-card h2 {
	text-transform: uppercase;
	font-size: 0.95rem;
	letter-spacing: 0.08em;
	color: var(--hub-muted);
	margin-bottom: 0.4rem;
}

.stat-card strong {
	display: block;
	font-size: clamp(1.7rem, 1.9vw, 2.4rem);
	color: var(--hub-text);
	text-align: center;
}

/* ======== STAT CARD ICONS & LAYOUT ======== */
.stat-card .stat-top {
	display: flex;
	align-items: center;
	gap: 0.9rem;
	width: 100%;
	justify-content: center;
}

.stat-card .stat-top h2 { font-size: 0.95rem; margin: 0; }

/* metric-specific colors for stat icons */
.insights-grid > .stat-card[data-metric="total"] .stat-icon { background: rgba(0, 119, 182, 0.07); color: var(--primary-color); }
.insights-grid > .stat-card[data-metric="new"] .stat-icon { background: rgba(96, 165, 250, 0.06); color: #2563eb; }
.insights-grid > .stat-card[data-metric="active"] .stat-icon { background: rgba(16, 185, 129, 0.06); color: #10b981; }
.insights-grid > .stat-card[data-metric="repeat"] .stat-icon { background: rgba(245, 158, 11, 0.06); color: #f59e0b; }
.insights-grid > .stat-card[data-metric="ltv"] .stat-icon { background: rgba(4, 120, 87, 0.06); color: #059669; }
.insights-grid > .stat-card[data-metric="ticket"] .stat-icon { background: rgba(29, 78, 216, 0.06); color: var(--primary-color); }

.stat-card .stat-icon {
	display: inline-grid;
	place-items: center;
	width: 44px;
	height: 44px;
	border-radius: 10px;
	background: rgba(29, 78, 216, 0.06);
	color: var(--hub-primary);
	font-size: 18px;
	flex: 0 0 44px;
	box-shadow: 0 4px 14px rgba(29,78,216,0.06);
}

.stat-card .stat-icon { transition: transform var(--hub-transition), box-shadow var(--hub-transition); }
.stat-card:hover .stat-icon { transform: translateY(-4px) scale(1.05); box-shadow: var(--hub-shadow-hover); }

.stat-card .delta { font-size: 0.9rem; }

/* Stat value variant: slightly larger and bold */
.stat-card .stat-value { font-size: clamp(1.4rem, 2.4vw, 2.4rem); font-weight: 800; }

.stat-card .stat-subtext { margin-top: 0.35rem; font-size: 0.95rem; }

/* Make stat-top left-aligned inside card on wider layouts to keep icon and title together */
@media (min-width: 1160px) {
	.insights-grid > .stat-card { align-items: flex-start; text-align: left; }
	.insights-grid > .stat-card .stat-top { justify-content: flex-start; }
}

/* Larger stat card to visually separate LTV or averages when needed */
.stat-card.large {
	/* A large stat card (like an average or an LTV) should span the wider
	   left column plus one of the smaller ones so it reads as an emphasized
	   horizontal card. On smaller screens, it reverts to normal. */
	grid-column: 1 / span 2;
	grid-row: auto;
	padding: 1.6rem 2.2rem;
	min-height: 150px;
}

.stat-card .delta {
	margin-top: 0.35rem;
	font-size: 0.95rem;
	color: var(--hub-muted);
}

.delta.positive {
	color: var(--hub-success);
}

.delta.negative {
	color: var(--hub-danger);
}

/* ======== SEGMENTS / SURFACE CARDS ======== */
.surface-card header {
	display: flex;
	flex-direction: column;
	gap: 0.35rem;
}

.surface-card h2 {
	font-size: 1.25rem;
	color: var(--hub-text);
}

.surface-card p {
	color: var(--hub-muted);
	font-size: 0.95rem;
}

.segment-grid {
	margin-top: 1rem;
	display: grid;
	gap: 1rem;
	grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
}

.surface-card .section-header,
.surface-card .surface-header {
	margin-bottom: 1rem;
	padding-bottom: 0.6rem;
	border-bottom: 1px solid rgba(15, 23, 42, 0.06);
}

.surface-card .section-header h3,
.surface-card .surface-header h3 {
	font-size: 1.2rem;
	display: inline-flex;
	align-items: center;
	gap: 0.6rem;
	color: var(--hub-text);
}

.surface-card .section-header h3 > i,
.surface-card .surface-header h3 > i {
	/* direct child <i> fallback to preserve legacy markup */
	width: 32px;
	height: 32px;
	border-radius: 10px;
	background: rgba(29, 78, 216, 0.12);
	color: var(--hub-primary);
	display: inline-flex;
	align-items: center;
	justify-content: center;
}

/* Prefer using .section-icon wrapper for better structure and to avoid conflicts */
.surface-card .section-header h3 .section-icon,
.surface-card .surface-header h3 .section-icon {
	width: 32px;
	height: 32px;
	border-radius: 10px;
	background: rgba(29, 78, 216, 0.12);
	color: var(--hub-primary);
	display: inline-grid;
	place-items: center;
}
.surface-card .section-header h3 .section-icon i,
.surface-card .surface-header h3 .section-icon i {
	width: 18px;
	height: 18px;
	background: transparent;
	display: inline-block;
	color: inherit;
}

.segment-tile {
	border: 1px solid var(--hub-border);
	border-radius: 18px;
	padding: 1rem;
	background: rgba(255, 255, 255, 0.86);
	transition: var(--hub-transition);
	cursor: pointer;
}

.segment-tile:hover {
	transform: translateY(-4px);
}

.segment-tile.selected {
	border-color: rgba(29, 78, 216, 0.18);
	box-shadow: 0 10px 28px rgba(29, 78, 216, 0.06);
}

.segment-tile.selected strong {
	color: var(--hub-primary);
}

/* ======== SHIMMER / SKELETON PLACEHOLDERS ======== */
/* Soft neutral palette for skeletons */
:root {
	--skeleton-bg: rgba(8, 18, 34, 0.04);
	--skeleton-shine: rgba(255, 255, 255, 0.6);
}

.skeleton-line {
	display: inline-block;
	height: 12px;
	background: var(--skeleton-bg);
	border-radius: 8px;
	position: relative;
	overflow: hidden;
}

.skeleton-rect {
	display: block;
	width: 100%;
	height: 12px;
	background: var(--skeleton-bg);
	border-radius: 8px;
}

.skeleton-line.stat-placeholder {
	display: block;
	width: 40%;
	height: 18px;
	margin-top: 0.6rem;
}

.chart-body .skeleton-line.chart-placeholder {
	position: absolute;
	left: 1.5rem;
	top: 1.5rem;
	width: 60%;
	height: 12px;
	border-radius: 8px;
}

.skeleton-avatar {
	width: 36px;
	height: 36px;
	border-radius: 50%;
	background: var(--skeleton-bg);
}

.shimmer {
	background-image: linear-gradient(90deg, var(--skeleton-bg) 0%, rgba(255, 255, 255, 0.08) 40%, var(--skeleton-bg) 80%);
	background-size: 220% 100%;
	animation: shimmer 1.6s linear infinite;
}

@keyframes shimmer {
	0% {
		background-position: -120% 0;
	}

	100% {
		background-position: 120% 0;
	}
}

/* ======== LOADING STATES ======== */
.is-loading {
	opacity: 0.95;
}

/* Chart card shimmer overlay */
.chart-card.is-loading::before,
.stat-card.is-loading::before,
.table-card.is-loading::before {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background: linear-gradient(90deg, rgba(255, 255, 255, 0.0), rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0));
	pointer-events: none;
}

/* Small element-specific skeletons inside cards */
.stat-card.is-loading strong,
.stat-card.is-loading h2,
.chart-card.is-loading .chart-body,
.table-card.is-loading .table-wrapper {
	opacity: 0.15;
}

.stat-card.is-loading .skeleton-line,
.chart-card.is-loading .skeleton-line,
.table-card.is-loading .skeleton-line {
	opacity: 1;
}

/* Table skeleton row */
.skeleton-row td {
	padding: 0.75rem 1.1rem;
}

.skeleton-row .shimmer {
	height: 12px;
	border-radius: 8px;
}

/* ======== SUBTLE MOTIONS ======== */
@keyframes fadeInUp {
	from {
		transform: translateY(8px);
		opacity: 0;
	}

	to {
		transform: translateY(0);
		opacity: 1;
	}
}

.card-appear {
	animation: fadeInUp 0.4s ease-out both;
}

/* Respect user's reduce-motion setting */
@media (prefers-reduced-motion: reduce) {
	.shimmer {
		animation: none;
	}

	.card-appear {
		animation: none;
	}

	.btn-soft:hover {
		transform: none;
	}

	.stat-card:hover,
	.chart-card:hover {
		transform: none;
	}
}

.segment-tile h3 {
	font-size: 1.05rem;
	color: var(--hub-text);
}

.segment-tile p {
	color: var(--hub-muted);
	font-size: 0.9rem;
	margin: 0.35rem 0 0.65rem;
}

.segment-tile strong {
	font-size: 1.6rem;
	color: var(--hub-primary);
}

.tile-head {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 0.75rem;
}

.tile-head h3 {
	margin: 0;
}

/* ======== FILTERS & TABLE ======== */
.table-card header,
.filter-bar {
	display: flex;
	flex-wrap: wrap;
	gap: 0.8rem;
	align-items: center;
	margin-bottom: 1rem;
}

.filter-group {
	flex: 1 min(100%, 160px);
}

.filter-group input,
.filter-group select {
	width: 100%;
	border-radius: 14px;
	padding: 0.7rem 0.95rem;
	border: 1px solid var(--hub-border);
	background: rgba(255, 255, 255, 0.9);
	font-size: 0.95rem;
	color: var(--hub-text);
	transition: border-color 0.2s ease;
}
.filter-group input { padding-left: 2.8rem; }
.filter-group { position: relative; }
.filter-group.search::before { content: '\f002'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; left: 0.9rem; top: 50%; transform: translateY(-50%); color: var(--hub-muted); }

.filter-group input:focus,
.filter-group select:focus {
	outline: none;
	border-color: var(--hub-primary);
}

.table-wrapper {
	overflow-x: auto;
	border-radius: 18px;
	border: 1px solid rgba(15, 23, 42, 0.04);
}

table {
	width: 100%;
	border-collapse: collapse;
	background: rgba(255, 255, 255, 0.9);
}

thead th {
	background: rgba(4, 18, 38, 0.05);
	color: var(--hub-muted-strong);
	text-transform: uppercase;
	font-size: 0.9rem;
	letter-spacing: 0.06em;
	padding: 0.85rem 1rem;
}

tbody td {
	border-top: 1px solid rgba(15, 23, 42, 0.05);
	padding: 0.95rem 1.1rem;
	font-size: 0.95rem;
	color: var(--hub-text);
}
/* Ensure all table cells vertically center their content */
table th, table td { vertical-align: middle; }

/* Right align numerical columns */
td[data-label="Pedidos"], td[data-label="Ticket"], td[data-label="Último pedido"] { text-align: center; }
td[data-label="Cliente"] { text-align: left; }

tbody tr {
	transition: background 0.2s, transform 0.2s;
}

tbody tr:hover {
	background: rgba(29, 78, 216, 0.04);
	transform: translateY(-1px);
}

/* Selected row in table */
tbody tr.selected {
	background: rgba(14, 165, 233, 0.06);
	border-left: 4px solid var(--hub-primary);
}

tbody tr.selected td { padding-left: 0.75rem; }

.selected-badge {
	width: 22px;
	height: 22px;
	display: inline-grid;
	place-items:center;
	margin-right: 0.6rem;
	color: #fff;
	font-size: 0.9rem;
	line-height: 0;
	flex: 0 0 auto;
	border-radius: 999px;
	background: var(--hub-primary);
	box-shadow: 0 2px 8px rgba(8,18,34,0.06);
}

/* If the top customer row is highlighted, make the dot darker */
#top-customers li.selected svg.mini-dot circle { fill: var(--hub-primary); transform: scale(1.05); }
#top-customers li.selected strong { color: var(--hub-primary); }

/* Selected in top customers list */
#top-customers li.selected { background: rgba(29, 78, 216, 0.06); box-shadow: 0 8px 22px rgba(8, 18, 34, 0.04); }

.status-chip {
	border-radius: 999px;
	padding: 0.35rem 0.9rem;
	font-size: 0.85rem;
	font-weight: 600;
	justify-content: center;
	display: inline-flex;
	align-items: center;
	gap: 0.35rem;
	border: 1px solid transparent;
}

/* Center status chip in table row column */
td[data-label="Status"] { display:flex; align-items:center; justify-content:center; }
.status-chip { min-width: 92px; text-align:center; }
.status-chip { min-height: 34px; }

/* Detail header layout: avatar and badges */
.detail-body header { display:flex; justify-content:space-between; align-items:center; gap: 1rem; }
.detail-body .detail-name { display:flex; align-items:center; gap:0.6rem; }
.badge-ghost { display:inline-block; }

.status-chip.success {
	background: rgba(15, 157, 88, 0.12);
	color: var(--hub-success);
	border-color: rgba(15, 157, 88, 0.16);
}

.status-chip.warning {
	background: rgba(245, 158, 11, 0.14);
	color: var(--hub-warning);
	border-color: rgba(245, 158, 11, 0.2);
}

.status-chip.muted {
	background: rgba(100, 116, 139, 0.12);
	color: var(--hub-muted-strong);
	border-color: rgba(100, 116, 139, 0.14);
}

#clients-pagination {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding-top: 1rem;
	border-top: 1px solid rgba(15, 23, 42, 0.05);
}

#clients-pagination .actions {
	display: flex;
	gap: 0.5rem;
	align-items: center;
}

#clients-pagination button {
	border-radius: 12px;
	border: 1px solid var(--hub-border);
	padding: 0.45rem 0.8rem;
	background: #fff;
}
/* Larger clickable area and disabled state for pagination controls */
#clients-pagination .actions button { min-width: 44px; min-height: 44px; display:inline-grid; place-items:center; border-radius: 12px; }
#clients-pagination .actions button[disabled], #clients-pagination .actions button[aria-disabled="true"] { opacity: 0.55; pointer-events: none; cursor: not-allowed; border-color: rgba(15,23,42,0.06); }

/* ======== DETAIL PANEL ======== */
.detail-panel {
	min-width: 320px;
	display: flex;
	flex-direction: column;
	gap: 1rem;
}

.detail-panel.collapsed {
	opacity: 0;
	transform: translateX(8px);
	pointer-events: none;
	display: none;
}

/* Separate table card visually from the detail panel */
.table-card {
	padding: clamp(1rem, 1.2vw, 1.6rem);
}

.detail-panel {
	border-left: 1px solid rgba(15, 23, 42, 0.04);
	padding: clamp(1rem, 1.2vw, 1.6rem);
	box-shadow: 0 6px 18px rgba(11, 45, 76, 0.04);
}

/* Keep header sticky while content scrolls inside the detail panel */
.detail-panel { overflow: hidden; }
.detail-panel .detail-body { overflow-y: auto; max-height: calc(100vh - 180px); }
.detail-panel .detail-body header { position: sticky; top: 0; z-index: 4; background: var(--hub-card); padding-top: 0.25rem; padding-bottom: 0.25rem; padding-left: 0.25rem; padding-right: 0.25rem; }

/* When detail panel is visible ensure header pill/buttons are aligned */
.detail-panel .detail-body header {
	display:flex; align-items:center; justify-content:space-between; gap:0.8rem;
}
.detail-controls { display:flex; align-items:center; gap: 0.6rem; }
.detail-controls .badge-ghost.small { font-size: 0.78rem; padding: 3px 8px; border-radius: 999px; }

/* small icon button variant for header actions */
.btn-soft.btn-icon { --size: 36px; width: var(--size); height: var(--size); display:inline-grid; place-items:center; padding: 0; border-radius: 999px; }
.btn-soft.btn-icon svg { width: 16px; height: 16px; color: var(--hub-primary); fill: currentColor; }
.btn-soft.btn-icon { border: 1px solid rgba(15,23,42,0.06); background: rgba(255,255,255,0.98); box-shadow: 0 2px 10px rgba(8, 18, 34, 0.03); }
.btn-soft.btn-icon:hover { transform: translateY(-2px); box-shadow: var(--shadow-sm); }
.btn-soft.btn-icon[aria-expanded="false"] { opacity: 0.95; }

/* Make sure badge-ghost in the detail header sits well */
.detail-body .badge-ghost.small { border-radius: 999px; padding: 6px 10px; font-size: 0.9rem; border: 1px dashed rgba(15,23,42,0.06); background: rgba(15,23,42,0.02); color: var(--hub-muted-strong); }

.detail-body .detail-name { display:flex; align-items:center; gap:0.6rem; }
.detail-body .detail-name .avatar-large { margin-right: 0.6rem; }

/* Small close button in detail header */
.detail-panel #client-detail-toggle {
	height: 36px;
	padding: 0.4rem 0.6rem;
	border-radius: 999px;
	background: rgba(255,255,255,0.92);
	border: 1px solid rgba(15,23,42,0.06);
	box-shadow: none;
	font-size: 0.95rem;
}
.detail-panel #client-detail-toggle[aria-expanded="false"] { opacity: 0.7; }

.detail-panel .detail-body header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: 0.75rem;
}

.detail-body .detail-name {
	font-size: 1.35rem;
	font-weight: 600;
	color: var(--hub-text);
}
.detail-body .detail-name i { margin-right: 0.55rem; color: var(--hub-primary); }

.badge-ghost {
	border-radius: 999px;
	border: 1px dashed var(--hub-border-strong);
	padding: 0.25rem 0.85rem;
	color: var(--hub-muted-strong);
	font-size: 0.85rem;
}

/* Detail body small icons for email and phone */
.detail-body [data-role="email"] i, .detail-body [data-role="phone"] i { color: var(--hub-muted-strong); margin-right: 0.5rem; }

.meta-line {
	display: flex;
	justify-content: space-between;
	font-size: 0.95rem;
	color: var(--hub-muted-strong);
	padding: 0.35rem 0;
	border-bottom: 1px dashed rgba(15, 23, 42, 0.08);
}

.meta-line strong {
	color: var(--hub-text);
}

/* Right aligned meta values (email/phone/created) */
.meta-line [data-role] {
	display: inline-flex;
	gap: 0.5rem;
	align-items: center;
	justify-self: end;
}
.meta-line [data-role] svg { width: 16px; height: 16px; color: var(--hub-primary); opacity: 0.95; }
.meta-line [data-role] a { color: var(--hub-text); font-weight: 700; text-decoration: none; }
.meta-line [data-role] a:hover { text-decoration: underline; }
.meta-line [data-role] .text-muted { color: var(--hub-muted); }
.meta-line .meta-created { font-weight: 700; }

.empty-state {
	text-align: center;
	padding: 2.4rem 1rem;
	color: var(--hub-muted);
}

/* ======== TIMELINES ======== */
.timeline {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: column;
	gap: 0.6rem;
}

.timeline li {
	position: relative;
	padding: 0.6rem 0;
	color: var(--hub-muted-strong);
	font-size: 0.95rem;
	display: grid;
	grid-template-columns: 34px 1fr auto;
	align-items: center;
	gap: 0.65rem;
}

.timeline li::before {
	/* default timeline dot removed: events now insert explicit svg dots */
	content: none;
}

.timeline strong {
	color: var(--hub-text);
	font-size: 1rem;
}

.timeline li span {
	justify-self: end;
	font-size: 0.95rem;
}

/* Detail timeline specific styles */
.detail-body .timeline li { border-bottom: 1px dashed rgba(15, 23, 42, 0.04); padding: 0.65rem 0; }
.detail-body .timeline li .mini-dot { width: 12px; height: 12px; border-radius: 999px; display: inline-grid; place-items:center; }
.detail-body .timeline li .event-content { display: flex; flex-direction: column; gap: 2px; }
.detail-body .timeline li .event-title { font-weight: 700; color: var(--hub-text); }
.detail-body .timeline li .event-desc { font-size: 0.9rem; color: var(--hub-muted); }
.detail-body .timeline li .event-meta { justify-self: end; font-size: 0.92rem; color: var(--hub-muted); }
.detail-body .timeline li:hover { background: rgba(29, 78, 216, 0.03); }
.detail-body .timeline li.selected { background: rgba(29, 78, 216, 0.06); border-left: 3px solid rgba(29,78,216,0.12); }

.timeline li .progress-bar {
	grid-column: 1 / -1;
}

/* Mini list for engagement and small lists */
.mini-list {
	list-style: none;
	margin: 0;
	padding: 0;
	display: grid;
	gap: 0.45rem;
}

.mini-list li {
	display: grid;
	grid-template-columns: 18px 1fr auto;
	align-items: center;
	gap: 0.75rem;
	padding: 0.6rem 0.6rem;
	border-radius: 10px;
	cursor: pointer;
}

.mini-list li:hover {
	background: rgba(29, 78, 216, 0.04);
}

.mini-list li.active {
	background: rgba(29, 78, 216, 0.06);
	box-shadow: 0 6px 18px rgba(8, 18, 34, 0.04);
}

.mini-list li .mini-metrics { display: flex; flex-direction: column; align-items: flex-end; gap: 2px; }
.mini-list li .mini-count { font-size: 1.05rem; color: var(--hub-primary); font-weight: 700; }
.mini-list li .mini-pct { color: var(--hub-muted); font-size: 0.85rem; }

/* Icon dots for mini list items (matrix) */
.mini-list li::before { content: none; }

.mini-dot {
	display: inline-grid;
	place-items: center;
	font-size: 10px; /* FA icon size */
	color: var(--hub-primary);
	width: 14px;
	height: 14px;
	margin-right: 0.6rem;
	flex: 0 0 auto;
}

/* Surface card timeline tweaks: keep the items compact and add a subtle divider */
.surface-card .timeline {
	padding: 0.8rem 0.6rem;
}
.surface-card .timeline li { 
	padding: 0.6rem 0;
	border-bottom: 1px dashed rgba(15, 23, 42, 0.04);
}
.surface-card .timeline li:last-child { border-bottom: none; }
.surface-card .timeline li .mini-dot { width: 28px; height: 28px; font-size: 12px; background: var(--hub-primary); color: #fff; border-radius: 999px; box-shadow: 0 2px 6px rgba(2,6,23,0.06); place-items:center; display:inline-grid; }
.surface-card .timeline li .mini-dot svg, .surface-card .timeline li .mini-dot i { width: 18px; height: 18px; color: inherit; }
.surface-card .timeline li .mini-dot i { font-size: 14px; line-height: 1; }
.surface-card .timeline li .event-content { gap: 4px; }
.surface-card .timeline li p { margin: 0; }

/* Make rating pills compact inside timelines */
.surface-card .timeline .badge-ghost.small { border-radius: 999px; padding: 4px 8px; font-size: 0.82rem; border: 1px dashed rgba(15,23,42,0.06); background: rgba(15,23,42,0.02); color: var(--hub-muted-strong); }

/* Top customers: show a small badge / dot on each item and align as a row: icon + name + meta */
#top-customers { padding-left: 0; }
#top-customers li { display: grid; grid-template-columns: 40px 1fr auto; align-items: center; gap: 0.85rem; padding: 0.6rem 0; }
#top-customers li::before { content: none; }
#top-customers li strong { justify-self: start; font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#top-customers li { border-bottom: 1px dashed rgba(15,23,42,0.04); padding-bottom: 0.6rem; }

/* Avatar small size and alignment specifically for top customers */
#top-customers li .avatar { width: 34px; height: 34px; font-size: 0.95rem; }

/* meta column on the right */
.top-customer-meta { color: var(--hub-muted); font-size: 0.95rem; justify-self: end; text-align: right; min-width: 96px; padding-left: 8px; }

/* Highlighted/top row style
	Similar to selected in table, but more subtle to match the small list style */
#top-customers li.selected { background: rgba(29,78,216,0.04); box-shadow: 0 6px 18px rgba(8,18,34,0.04); border-left: 3px solid var(--hub-primary); padding-left: 0.85rem; }
#top-customers li.selected strong { color: var(--hub-primary); }

/* ======== CHART CARDS ======== */
.chart-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: 1rem;
}

.chart-header h3 {
	display: inline-flex;
	align-items: center;
	gap: 0.75rem;
	font-size: 1.35rem;
	color: var(--hub-text);
	margin: 0;
}

.chart-header h3 i {
	width: 38px;
	height: 38px;
	border-radius: 50%;
	background: var(--hub-primary-soft);
	color: var(--hub-primary);
	display: grid;
	place-items: center;
}

/* Prefer .section-icon wrapper in chart headers to avoid double-styling */
.chart-header h3 .section-icon {
	width: 38px;
	height: 38px;
	border-radius: 50%;
	background: var(--hub-primary-soft);
	color: var(--hub-primary);
	display: inline-grid;
	place-items: center;
}
.chart-header h3 .section-icon i {
	width: 18px;
	height: 18px;
	color: inherit;
	display: inline-block;
	background: transparent;
}

.chart-subtitle {
	color: var(--hub-muted);
	font-size: 0.95rem;
}

.chart-controls {
	display: inline-flex;
	gap: 0.5rem;
	padding: 0.25rem;
	border-radius: 999px;
	background: rgba(148, 163, 184, 0.18);
}

.chart-range {
	border: none;
	background: transparent;
	border-radius: 999px;
	padding: 0.35rem 0.9rem;
	font-weight: 600;
	color: var(--hub-muted-strong);
	cursor: pointer;
	transition: background 0.2s, color 0.2s;
}

.chart-range.active {
	background: #fff;
	color: var(--hub-primary);
	box-shadow: 0 8px 20px rgba(15, 23, 42, 0.08);
}

.chart-body {
	position: relative;
	min-height: 260px;
}

.chart-empty {
	position: absolute;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(255, 255, 255, 0.92);
	border-radius: inherit;
	color: var(--hub-muted);
	font-size: 0.95rem;
}

/* Ensure hidden attribute hides chart empty overlays and similar panels.
 * By default some author CSS rules can override the UA style for [hidden],
 * so explicitly hide these elements when the attribute is present.
 */
.chart-empty[hidden],
.empty-state[hidden],
.detail-body[hidden] {
	display: none !important;
}

/* Prefer hiding chart empty overlays also when aria-hidden is present to
 * keep behavior consistent when JS only sets aria-hidden for accessibility.
 */
.chart-empty[aria-hidden="true"] {
	display: none !important;
}

.chart-legend {
	margin-top: 1rem;
	display: flex;
	flex-wrap: wrap;
	gap: 0.7rem 1.2rem;
}

.chart-legend-item {
	display: inline-flex;
	align-items: center;
	gap: 0.5rem;
	font-size: 0.9rem;
	color: var(--hub-text);
}

.chart-legend-swatch {
	width: 12px;
	height: 12px;
	border-radius: 4px;
}

.chart-legend-item strong {
	font-size: 0.95rem;
}

.chart-legend-item small {
	color: var(--hub-muted);
}

/* Stars for average rating */
.rating-stars { margin-top: 8px; }
.rating-stars .average-star-row i { margin-right: 4px; }
.rating-stars .average-star-row small { margin-left: 8px; color: #64748b; }

/* Highlight selected table row */
tr.is-selected { background: rgba(59,130,246,0.06); }

/* Debug area for lists */
#reviews-debug, #questions-debug {
	background: rgba(15,23,42,0.02);
	border-top: 1px dashed rgba(99,102,241,0.07);
}

/* Inline simple progress bar used by trend timeline entries */
.progress-bar {
	display: block;
	height: 6px;
	background: rgba(15, 23, 42, 0.04);
	border-radius: 6px;
	overflow: hidden;
}

.progress-bar>div {
	height: 100%;
	border-radius: 6px;
}

.progress-bar>div {
	transition: width 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
	background: var(--hub-primary);
}

/* Highlighted name cell in tables */
.table-primary {
	font-weight: 700;
	color: var(--hub-text);
	display: flex;
	align-items: center;
	gap: 0.6rem;
}

/* Avatar initials in table and detail */
.avatar {
	display: inline-grid;
	place-items: center;
	width: 34px;
	height: 34px;
	border-radius: 999px;
	color: #fff;
	font-weight: 700;
	margin-right: 0.8rem;
	flex: 0 0 auto;
}

.avatar-large {
	display: inline-grid;
	place-items: center;
	width: 44px;
	height: 44px;
	border-radius: 999px;
	color: #fff;
	font-weight: 800;
	margin-right: 0.9rem;
	font-size: 1.05rem;
}

/* ======== RESPONSIVE ======== */
@media (max-width: 768px) {
	.page-header {
		flex-direction: column;
		align-items: flex-start;
	}

	thead {
		display: none;
	}

	table,
	tbody,
	tr,
	td {
		display: block;
		width: 100%;
	}

	tbody tr {
		background: rgba(255, 255, 255, 0.9);
		border: 1px solid rgba(15, 23, 42, 0.04);
		border-radius: 16px;
		margin-bottom: 1rem;
		padding: 0.8rem;
	}

	tbody td {
		border: none;
		padding: 0.35rem 0;
	}

	tbody td::before {
		content: attr(data-label);
		display: block;
		font-weight: 600;
		color: var(--hub-muted);
		margin-bottom: 0.2rem;
		font-size: 0.85rem;
		text-transform: uppercase;
	}

	.detail-panel {
		position: static;
		width: 100%;
	}
}

/* On very narrow screens, large stat cards should behave like normal items */
@media (max-width: 900px) {
	.stat-card.large { grid-column: auto; }
}

/* Make top customers responsive: move meta under name on small screens */
@media (max-width: 720px) {
	#top-customers li { grid-template-columns: 34px 1fr; grid-template-rows: auto auto; align-items: start; }
	#top-customers li strong { grid-column: 2 / -1; }
	.top-customer-meta { grid-column: 2 / -1; justify-self: start; padding-left: 0; }
}

/* Make table rows keyboard-focus visible */
tbody tr:focus { outline: 3px solid rgba(29,78,216,0.12); outline-offset: -3px; }

/* ======== MICRO INTERACTIONS ======== */
@keyframes hubPulse {
	0% {
		transform: scale(1);
		opacity: 0.8;
	}

	70% {
		transform: scale(1.3);
		opacity: 0;
	}

	100% {
		opacity: 0;
	}
}

.stat-card strong::after {
	content: '';
	position: absolute;
	width: 80px;
	height: 80px;
	top: 10px;
	right: 14px;
	border-radius: 50%;
	background: var(--hub-primary-soft);
	filter: blur(60px);
	opacity: 0.6;
}

.segment-tile:hover::after,
.stat-card:hover::after,
.chart-card:hover::after {
	animation: hubPulse 1.8s ease-out forwards;
}

/* Additional styles to improve the acquisition weekly visualization and summarization */
/* Collapsed timeline for long lists: limit visible height and add fade gradient */
.timeline.collapsed {
	max-height: 360px;
	/* shows approx ~8-12 rows depending on line-height */
	overflow: hidden;
	position: relative;
}

.timeline.collapsed::after {
	/* subtle gradient fade at the bottom to indicate more content */
	content: '';
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	height: 48px;
	pointer-events: none;
	background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, rgba(247, 249, 252, 0.98) 40%);
}

.trend-summary {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 1rem;
	padding: 0.35rem 0.2rem 0.9rem 0.2rem;
	border-bottom: 1px solid rgba(15, 23, 42, 0.04);
	margin-bottom: 0.6rem;
}

@media (max-width: 720px) {
	.trend-summary {
		flex-direction: column;
		align-items: flex-start;
		gap: 0.3rem;
	}

	.trend-controls {
		width: 100%;
		display: flex;
		justify-content: flex-end;
	}

	.timeline.collapsed {
		max-height: 260px;
	}
}

.trend-summary strong {
	font-size: 1.1rem;
	color: var(--hub-text);
}

.trend-summary small {
	color: var(--hub-muted);
	margin-left: 0.45rem;
}

.trend-controls button {
	border-radius: 999px;
	padding: 0.35rem 0.8rem;
	border: 1px solid var(--hub-border);
	background: transparent;
	cursor: pointer;
}

.btn-mini {
	padding: 0.35rem 0.6rem;
	font-size: 0.86rem;
}

/* Badge displayed on segment tiles for counts */
.segment-tile .count-badge {
	display: inline-flex;
	margin-top: 0.35rem;
	align-items: center;
	gap: 0.5rem;
	font-weight: 700;
	color: var(--hub-primary);
	font-size: 1.05rem;
}

.segment-tile .count-badge small {
	font-weight: 600;
	color: var(--hub-muted);
	font-size: 0.9rem;
}

/* Provide a small compact view for the trend that shows the latest weeks */
.timeline.compact li span {
	color: var(--hub-muted);
	font-size: 0.9rem;
}

/* section inline icons (fallback) */
.section-icon { display:inline-grid; width:38px; height:38px; border-radius:50%; background:var(--hub-primary-soft); color:var(--hub-primary); place-items:center; margin-right: 0.6rem; }
.section-icon .icon-grid { width:18px; height:18px; }
/* Ensure any font icon inside section-icon or mini-dot is perfectly centered */
.section-icon i,
.section-icon .icon-grid,
.mini-dot i,
.mini-dot svg,
.chart-header h3 .section-icon i,
.surface-card .section-header h3 .section-icon i { display: inline-grid; place-items: center; width: 18px; height: 18px; vertical-align: middle; line-height: 1; }
.section-icon i, .mini-dot i { font-size: 14px; }
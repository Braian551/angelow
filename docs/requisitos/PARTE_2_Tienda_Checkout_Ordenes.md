# Matriz de Requisitos Completa - PARTE 2 de 3
## Experiencia de Compra, Checkout y Órdenes (RF-043 a RF-110)

| Módulo | Subprocesos | Nro. | Descripción (RF) | Nro. | Descripción (RN) | Nro. | Descripción (RI) |
|---|---|---|---|---|---|---|---|
| Experiencia de Compra (Tienda) | Agregar al carrito | RF-043 | El sistema debe permitir a los usuarios agregar productos al carrito seleccionando color, talla y cantidad deseada. | RN-043 | Al agregar un producto al carrito, el sistema verifica inmediatamente si hay stock disponible del color y talla seleccionados. Si está agotado, se mostrará un mensaje informativo y no se podrá agregar. | RI-043 | Identificador del producto, variante de color seleccionada, variante de talla seleccionada, cantidad a agregar, stock disponible de esa combinación, precio unitario y fecha de agregado al carrito. |
| Experiencia de Compra (Tienda) | Ver carrito | RF-044 | El sistema debe permitir a los usuarios visualizar todos los productos en su carrito con imagen, nombre, color, talla, cantidad, precio unitario y subtotal. | RN-044 | En el carrito puedes ver todos los productos que vas a comprar con su foto, nombre, color, talla, precio y cantidad. El subtotal se calcula automáticamente multiplicando precio por cantidad. El total general se muestra al final. | RI-044 | Listado de ítems del carrito con: identificador del ítem, producto con imagen, color y talla seleccionados, cantidad, precio unitario, subtotal del ítem, contador total de productos y suma total del carrito. |
| Experiencia de Compra (Tienda) | Actualizar cantidad | RF-045 | El sistema debe permitir modificar la cantidad de productos en el carrito, aumentando o disminuyendo según disponibilidad de stock. | RN-045 | La cantidad en el carrito no puede superar las unidades disponibles en inventario. Si intentas agregar más de lo disponible, el sistema te informará cuántas unidades puedes comprar como máximo. Los totales se actualizan automáticamente sin recargar la página. | RI-045 | Identificador del ítem del carrito, nueva cantidad solicitada, cantidad disponible en inventario, nueva cantidad validada (no puede exceder stock), nuevo subtotal calculado y fecha de actualización. |
| Experiencia de Compra (Tienda) | Eliminar del carrito | RF-046 | El sistema debe permitir eliminar productos individuales del carrito de compras de forma instantánea. | RN-046 | Al eliminar un producto del carrito, se libera inmediatamente ese stock para que otros clientes puedan comprarlo. El carrito se actualiza automáticamente mostrando el nuevo total sin ese producto. | RI-046 | Identificador del ítem a eliminar, producto eliminado (para confirmación), nuevo total del carrito sin ese ítem y fecha de eliminación. |
| Experiencia de Compra (Tienda) | Compra inmediata | RF-047 | El sistema debe permitir iniciar una compra inmediata desde la ficha de producto, creando un carrito temporal que lleva al cliente directamente al paso de envío sin mezclar esos artículos con su carrito habitual. | RN-047 | Al usar "Comprar ahora" se crea un carrito aislado asociado al usuario o a su sesión. El sistema valida que el carrito pertenezca al cliente antes de continuar, elimina la bandera de compra inmediata tras usarla y, si no coincide, redirige al carrito estándar para evitar compras duplicadas. | RI-047 | Identificador del carrito temporal, indicador buy_now, usuario y/o session_id asociados, productos y cantidades incluidos, hora de creación, subtotal calculado y referencia al carrito principal si existe. |
| Experiencia de Compra (Tienda) | Buscar productos | RF-048 | El sistema debe permitir buscar productos por nombre, descripción o categoría de forma instantánea con sugerencias mientras escribes. | RN-048 | La búsqueda es case-insensitive (no diferencia mayúsculas/minúsculas) y tolerante a errores. Prioriza productos cuyo nombre comienza con lo que escribiste. Muestra sugerencias después de escribir 3 caracteres. La búsqueda es instantánea sin necesidad de presionar Enter. | RI-048 | Término de búsqueda ingresado, resultados encontrados (productos con: nombre, imagen, precio, categoría), cantidad total de resultados, tiempo de respuesta de la búsqueda y ordenamiento de resultados por relevancia. |
| Experiencia de Compra (Tienda) | Guardar historial de búsquedas | RF-049 | El sistema debe registrar automáticamente cada búsqueda realizada con el término buscado, cantidad de resultados y fecha para análisis posteriores. | RN-049 | Cada búsqueda queda registrada para análisis de tendencias y mejora del catálogo. Se identifica qué términos generan más búsquedas, cuáles no encuentran resultados (productos faltantes) y patrones de búsqueda de los clientes. | RI-049 | Término buscado, identificador del usuario (opcional para usuarios no registrados), cantidad de resultados encontrados, producto clickeado (si aplica), fecha y hora de la búsqueda y dispositivo utilizado (móvil/escritorio). |
| Experiencia de Compra (Tienda) | Mostrar búsquedas populares | RF-050 | El sistema debe mostrar las búsquedas más populares como sugerencias rápidas para facilitar la navegación de los clientes. | RN-050 | Las búsquedas populares se calculan contando cuántas veces se ha buscado cada término en los últimos 30 días. Se muestran máximo las 10 búsquedas más frecuentes. Se actualizan diariamente para reflejar tendencias actuales. | RI-050 | Listado de términos de búsqueda más populares con: término, cantidad de veces buscado en período de tiempo, cantidad promedio de resultados y enlace directo a los resultados de esa búsqueda. |
| Experiencia de Compra (Tienda) | Búsquedas sin resultados | RF-051 | El sistema debe registrar las búsquedas que no encuentran productos para identificar oportunidades de ampliar el catálogo. | RN-051 | Los administradores pueden ver un reporte de términos buscados que no devolvieron resultados, ordenados por frecuencia. Esto identifica qué productos o categorías están buscando los clientes pero no están disponibles en el catálogo. | RI-051 | Reporte de búsquedas sin resultados con: término buscado, cantidad de veces buscado sin resultados, fechas de las búsquedas y sugerencias automáticas de productos similares para agregar al catálogo. |
| Experiencia de Compra (Tienda) | Filtrar por categoría | RF-052 | El sistema debe permitir filtrar productos por categoría específica mostrando solo los productos que pertenecen a esa categoría. | RN-052 | Al seleccionar una categoría (vestidos, camisetas, pantalones, etc.), se muestran solo productos de esa categoría. El contador muestra cuántos productos tiene cada categoría. Las categorías sin productos no se muestran en los filtros. | RI-052 | Categoría seleccionada, productos filtrados por esa categoría, cantidad de productos en la categoría, subcategorías disponibles (si aplica) y opciones de ordenamiento de resultados. |
| Experiencia de Compra (Tienda) | Filtrar por rango de precio | RF-053 | El sistema debe permitir filtrar productos por rango de precio usando un control deslizante con precio mínimo y máximo. | RN-053 | Puedes definir un rango de precio personalizado arrastrando los controles deslizantes o ingresando valores específicos. El sistema muestra automáticamente solo productos dentro de ese rango. Los valores extremos se ajustan a los precios reales disponibles. | RI-053 | Precio mínimo seleccionado, precio máximo seleccionado, precio mínimo disponible en catálogo, precio máximo disponible en catálogo, productos filtrados por rango y cantidad de resultados encontrados. |
| Experiencia de Compra (Tienda) | Filtrar por género | RF-054 | El sistema debe permitir filtrar productos por género (niño, niña, bebé, unisex) mostrando solo productos apropiados para la selección. | RN-054 | Puedes seleccionar uno o múltiples géneros simultáneamente. Si seleccionas "niña" y "bebé", se mostrarán productos de ambas categorías. Cada opción muestra el contador de productos disponibles. Los filtros se pueden combinar con categorías y precios. | RI-054 | Géneros seleccionados (niño/niña/bebé/unisex), productos filtrados por género(s), cantidad de productos por género, combinación con otros filtros activos y ordenamiento de resultados. |
| Experiencia de Compra (Tienda) | Agregar a Wishlist | RF-055 | El sistema debe permitir a los usuarios agregar productos a su lista de favoritos haciendo clic en el icono de corazón. | RN-055 | Solo usuarios registrados pueden agregar productos a favoritos. El corazón cambia de color inmediatamente al agregarse. No puedes agregar el mismo producto dos veces. Tu lista se mantiene sincronizada en todas las páginas que tengas abiertas simultáneamente. | RI-055 | Identificador del usuario, identificador del producto, fecha de agregado a favoritos. Relación única usuario-producto (sin duplicados). |
| Experiencia de Compra (Tienda) | Ver mi Wishlist | RF-056 | El sistema debe permitir visualizar la lista completa de productos favoritos con imagen, nombre, precio actualizado y disponibilidad. | RN-056 | Tu lista de favoritos es personal y privada. Para cada producto verás su imagen, nombre, precio actual (actualizado en tiempo real), disponibilidad de stock y botón para agregar al carrito. Un contador en el menú muestra cuántos favoritos tienes. | RI-056 | Listado de productos en wishlist con: imagen del producto, nombre, precio actualizado, indicador de disponibilidad (en stock/agotado), fecha de agregado a favoritos y opciones (eliminar de favoritos, agregar al carrito). |
| Experiencia de Compra (Tienda) | Eliminar de Wishlist | RF-057 | El sistema debe permitir eliminar productos individuales de la lista de favoritos de forma instantánea. | RN-057 | Puedes eliminar productos de tu lista de favoritos haciendo clic nuevamente en el corazón o desde la página de favoritos. El cambio es inmediato. El contador de favoritos se actualiza automáticamente. No hay confirmación para evitar pasos innecesarios. | RI-057 | Identificador del usuario, identificador del producto a eliminar, fecha de eliminación y actualización del contador de favoritos del usuario. |
| Experiencia de Compra (Tienda) | Hacer pregunta sobre producto | RF-058 | El sistema debe permitir a los usuarios hacer preguntas sobre productos directamente desde la página del producto. | RN-058 | Solo usuarios registrados pueden hacer preguntas. Las preguntas tienen máximo 500 caracteres. Quedan pendientes de respuesta hasta que un administrador las responda. Una vez respondidas, se publican automáticamente para ayudar a otros clientes con dudas similares. | RI-058 | Identificador del producto, identificador del usuario que pregunta, texto de la pregunta (máximo 500 caracteres), fecha de la pregunta, estado de respuesta (pendiente/respondida) y fecha de respuesta. |
| Experiencia de Compra (Tienda) | Editar mi pregunta | RF-059 | El sistema debe permitir a los usuarios editar sus propias preguntas sobre productos antes de que sean respondidas. | RN-059 | Solo puedes editar tus propias preguntas y únicamente si aún no han sido respondidas. Una vez que un administrador responde, la pregunta queda bloqueada para edición. Puedes modificar el texto de la pregunta manteniendo el límite de 500 caracteres. | RI-059 | Identificador de la pregunta, nuevo texto de la pregunta, verificación de propiedad (usuario actual = autor), verificación de estado (sin respuestas), fecha de última edición. |
| Experiencia de Compra (Tienda) | Eliminar mi pregunta | RF-060 | El sistema debe permitir a los usuarios eliminar sus propias preguntas sobre productos si cambian de opinión. | RN-060 | Solo puedes eliminar tus propias preguntas. Si la pregunta ya tiene respuestas, al eliminarla se borran también todas las respuestas asociadas. El sistema pedirá confirmación antes de eliminar. La eliminación es permanente. | RI-060 | Identificador de la pregunta a eliminar, verificación de propiedad (usuario actual = autor), eliminación en cascada de respuestas asociadas, fecha de eliminación. |
| Experiencia de Compra (Tienda) | Responder preguntas (Admin) | RF-061 | El sistema debe permitir a los administradores o vendedores responder las preguntas pendientes de los clientes sobre productos. | RN-061 | Los administradores ven todas las preguntas pendientes en un listado. Al responder, la pregunta y respuesta se publican automáticamente en la página del producto. Los clientes que hicieron la pregunta reciben notificación por correo cuando su pregunta es respondida. | RI-061 | Identificador de la pregunta, texto de la respuesta (máximo 1000 caracteres), identificador del administrador que responde, fecha de la respuesta, notificación enviada al usuario y publicación automática en página del producto. |
| Experiencia de Compra (Tienda) | Ver reseñas de producto | RF-062 | El sistema debe permitir visualizar las reseñas y calificaciones de cada producto con estadísticas, promedio y distribución de estrellas. | RN-062 | Las reseñas se muestran con estadísticas completas: calificación promedio (1-5 estrellas), total de reseñas y gráfico de distribución. Las reseñas de compras verificadas aparecen primero. Se muestran máximo 10 reseñas por página ordenadas por fecha (más recientes primero) o por utilidad (más votadas primero). | RI-062 | Estadísticas de reseñas: calificación promedio, total de reseñas, distribución por estrellas (cuántas de 5★, 4★, 3★, 2★, 1★). Listado de reseñas con: usuario, calificación, título, comentario, fecha, indicador de compra verificada y cantidad de votos útiles. |
| Experiencia de Compra (Tienda) | Escribir reseña con imágenes | RF-063 | El sistema debe permitir a los usuarios que han comprado un producto escribir reseñas con calificación (1-5 estrellas), título, comentario y hasta 5 imágenes adjuntas. | RN-063 | Solo los clientes que han comprado el producto pueden dejar reseñas. Cada usuario puede dejar una sola reseña por producto. Las imágenes son opcionales, máximo 5 por reseña, formatos JPG/PNG/WEBP/AVIF, máximo 5MB cada una. El título debe tener mínimo 3 caracteres y el comentario mínimo 10 caracteres. Las reseñas se aprueban automáticamente pero pueden ser moderadas posteriormente. | RI-063 | Identificador del producto, identificador del usuario, identificador de la orden (para verificación de compra), calificación (1-5), título de la reseña, comentario, array de rutas de imágenes subidas, indicador de compra verificada, estado de aprobación, fecha de creación. |
| Experiencia de Compra (Tienda) | Marcar reseña como útil | RF-064 | El sistema debe permitir a los usuarios marcar reseñas de otros clientes como útiles o no útiles para ayudar a destacar las opiniones más valiosas. | RN-064 | Solo usuarios registrados pueden votar. Cada usuario puede votar una sola vez por reseña (útil o no útil). Los votos se contabilizan y las reseñas con más votos útiles aparecen primero cuando se ordena por utilidad. No puedes votar tu propia reseña. | RI-064 | Identificador de la reseña, identificador del usuario que vota, tipo de voto (útil/no útil), fecha del voto, contador total de votos útiles y contador total de votos no útiles por reseña. |
| Experiencia de Compra (Tienda) | Editar mi reseña | RF-065 | El sistema debe permitir a los usuarios editar sus propias reseñas para corregir errores o actualizar su opinión después de más uso del producto. | RN-065 | Solo puedes editar tus propias reseñas. Puedes modificar el título, comentario, calificación y agregar/eliminar imágenes. No puedes editar reseñas de otros usuarios. La fecha de última edición se registra y se muestra junto a la reseña. | RI-065 | Identificador de la reseña, nuevos valores para: calificación, título, comentario, imágenes actualizadas, fecha de última edición, indicador de reseña editada. |
| Experiencia de Compra (Tienda) | Eliminar mi reseña | RF-066 | El sistema debe permitir a los usuarios eliminar sus propias reseñas si cambian de opinión o ya no desean que aparezca publicada. | RN-066 | Solo puedes eliminar tus propias reseñas. Al eliminar una reseña se borran también sus imágenes asociadas y todos los votos que recibió. El sistema pedirá confirmación antes de eliminar. La eliminación es permanente y no se puede deshacer. | RI-066 | Identificador de la reseña a eliminar, verificación de propiedad (usuario actual = autor), eliminación de imágenes asociadas, eliminación de votos recibidos, fecha de eliminación. |
| Experiencia de Compra (Tienda) | Sugerencias personalizadas | RF-067 | El panel del usuario debe mostrar una rejilla de hasta 6 productos sugeridos calculados con base en categorías compatibles, calificaciones positivas y novedades recientes que el cliente aún no tiene en su lista de deseos. | RN-067 | El motor ordena primero por calificación promedio y número de reseñas, luego por fecha de lanzamiento. Si no hay suficientes coincidencias, se completa con productos activos al azar. Nunca repite productos ya guardados como favoritos. | RI-067 | Datos por producto: id, nombre, slug, categoría, precios (base y promocional), indicador de destacado, ruta de imagen principal, promedio de calificación, número de reseñas, estado favorito y fechas de creación. |
| Proceso de Checkout y Pagos | Revisar carrito | RF-068 | El sistema debe mostrar el resumen completo del carrito en el primer paso del proceso de compra, con posibilidad de volver a modificar cantidades. | RN-068 | Antes de proceder al pago, puedes revisar tu carrito completo. Todavía puedes modificar cantidades o eliminar productos. Solo los usuarios registrados e iniciados sesión pueden proceder a comprar. | RI-068 | Resumen del carrito: listado de productos con cantidades, precios, subtotal, botón para continuar al siguiente paso y validación de usuario autenticado. |
| Proceso de Checkout y Pagos | Seleccionar dirección | RF-069 | El sistema debe permitir seleccionar o agregar una dirección de envío de las guardadas, mostrando cada una con mapa y datos completos. | RN-069 | Puedes elegir cualquiera de tus direcciones guardadas o agregar una nueva dirección durante el proceso de compra. La dirección debe tener coordenadas GPS obligatorias para que el repartidor pueda ubicarte fácilmente. | RI-069 | Listado de direcciones del usuario, dirección seleccionada con: dirección completa, coordenadas GPS, nombre y teléfono del receptor, instrucciones de entrega y visualización en mapa. |
| Proceso de Checkout y Pagos | Calcular envío | RF-070 | El sistema debe calcular automáticamente el costo de envío según el subtotal de la compra y las reglas de envío configuradas. | RN-070 | El costo de envío varía según el total de tu compra. Compras pequeñas pagan más envío, compras medianas pagan menos, y compras grandes pueden tener envío gratis. El costo se calcula automáticamente al seleccionar la dirección. | RI-070 | Subtotal de la compra, reglas de envío aplicables (monto mínimo, monto máximo, costo), costo de envío calculado, días estimados de entrega y total con envío incluido. |
| Proceso de Checkout y Pagos | Aplicar descuento | RF-071 | El sistema debe permitir aplicar códigos de descuento válidos, validando su vigencia, usos disponibles y aplicabilidad a los productos del carrito. | RN-071 | Puedes ingresar un código de descuento en esta etapa. El sistema verificará que sea válido, que no haya vencido, que no haya alcanzado su límite de usos y que aplique a los productos en tu carrito. Si es válido, verás el descuento reflejado inmediatamente. | RI-071 | Código ingresado, validación del código (vigencia, usos, productos), tipo de descuento (porcentaje/monto fijo/envío gratis), valor del descuento, descuento aplicado calculado y nuevo total con descuento. |
| Proceso de Checkout y Pagos | Tipo de entrega | RF-072 | El sistema debe mostrar todas las opciones activas de entrega (domicilio, express o recogida en tienda) como tarjetas seleccionables y recalcular al instante el costo y el tiempo de envío según la opción elegida. | RN-072 | Los métodos de entrega provienen de la configuración y siempre se marca uno como predeterminado. Si el nombre o la descripción incluyen "tienda" o "recogida", la orden se marca como retiro en tienda, se muestran los datos del punto físico y se genera un enlace directo con la ruta sugerida en Google Maps. | RI-072 | Catálogo de métodos activos con: identificador, nombre, descripción, ícono, costo base, tiempo estimado, indicador de recogida en tienda, enlace sugerido, coordenadas del punto físico y dirección de envío seleccionada por el cliente. |
| Proceso de Checkout y Pagos | Ver resumen final | RF-073 | El sistema debe mostrar el resumen completo de la compra antes del pago: productos, dirección, envío, descuentos y total final. | RN-073 | El resumen final muestra todos los detalles de tu compra claramente desglosados: subtotal de productos, descuento (si aplica), costo de envío y total a pagar. También verás la dirección de entrega y tiempo estimado. | RI-073 | Resumen completo: productos con cantidades y precios, dirección de envío, subtotal, descuento aplicado, costo de envío, total final, método de pago seleccionado y botón para confirmar compra. |
| Proceso de Checkout y Pagos | Procesar pago por transferencia | RF-074 | El sistema debe permitir realizar el pago mediante transferencia bancaria, mostrando los datos de la cuenta y permitiendo subir el comprobante de pago. | RN-074 | Para pagar por transferencia, el sistema te muestra los datos bancarios de la empresa. Después de transferir, debes subir una foto del comprobante (JPG, PNG o PDF, máximo 5 MB). Tu pedido quedará pendiente de verificación hasta que confirmemos el pago. | RI-074 | Información bancaria: banco, número de cuenta, tipo de cuenta, titular, identificación. Comprobante subido: archivo, ruta de almacenamiento, fecha de subida. Estado de la transacción: pendiente, verificado o rechazado. |
| Proceso de Checkout y Pagos | Validar comprobante y consentimiento | RF-075 | El sistema debe exigir referencia bancaria, comprobante en formatos permitidos y aceptación de términos antes de crear la orden, registrar la transacción y limpiar el carrito. | RN-075 | Solo se aceptan comprobantes JPG, PNG o PDF de máximo 5 MB, que se guardan en la carpeta de comprobantes con un nombre único. También se verifica que exista una cuenta bancaria activa y que el cliente marque la casilla de términos; de lo contrario, la compra no continúa. | RI-075 | Número de referencia del pago, ruta del comprobante, tipo y tamaño del archivo, marca de aceptación de términos, identificador de la transacción, estado inicial del pago, identificador del descuento utilizado y totales finales (subtotal, envío, total). |
| Proceso de Checkout y Pagos | Confirmar orden | RF-076 | El sistema debe crear la orden de compra, enviar correo de confirmación con PDF adjunto, limpiar el carrito y mostrar página de confirmación con número de orden. | RN-076 | Al completar tu compra recibirás: 1) Una página de confirmación con tu número de pedido único, 2) Un correo electrónico con todos los detalles y PDF adjunto, 3) Tu carrito se vaciará automáticamente. El stock de los productos se descuenta inmediatamente. | RI-076 | Orden creada con: número único de orden (ORD-YYYYMMDD-XXXXXX), identificador del usuario, productos y cantidades, dirección de envío, total, descuento, envío, estado inicial (pendiente), comprobante de pago subido y fecha de creación. |
| Proceso de Checkout y Pagos | Confirmación inteligente | RF-077 | La vista de confirmación debe adaptarse según el tipo de entrega, mostrando instrucciones especiales para recogida en tienda, ofreciendo la descarga del PDF y manteniendo visible el número de pedido para futuras consultas. | RN-077 | Si la orden es de recogida se muestra mapa con la ruta hacia la tienda, horarios y pasos "Listo para recoger". Para domicilios se despliega la línea de tiempo desde pago hasta entrega. En ambos casos se limpia el carrito, se mantienen descuentos consumidos como usados y solo se permite descargar el PDF si hay motor disponible. | RI-077 | Número de orden, correo del cliente, dirección o punto de recogida, coordenadas guardadas, enlace a Google Maps, estados con fecha y hora, indicador `pdf_available`, bandera de limpieza de carrito/descuentos y registro del comprobante generado. |
| Proceso de Checkout y Pagos | Configurar métodos de envío | RF-078 | El sistema debe permitir configurar métodos de envío disponibles con nombre, días estimados de entrega y estado activo/inactivo. | RN-078 | Los métodos de envío definen las opciones que verán los clientes al comprar (Envío Estándar 3-5 días, Envío Express 1-2 días). Solo los métodos activos aparecen durante el proceso de compra. Cada método tiene días estimados que se muestran al cliente. | RI-078 | Nombre del método de envío, descripción breve, días estimados de entrega mínimos, días estimados de entrega máximos, estado (activo/inactivo) y orden de visualización en el checkout. |
| Proceso de Checkout y Pagos | Configurar reglas de precio de envío | RF-079 | El sistema debe permitir configurar reglas dinámicas de costo de envío basadas en rangos de precio del subtotal de la compra. | RN-079 | Las reglas definen cuánto se cobra de envío según el monto de compra. Por ejemplo: $0-$50,000 = $8,000 envío, $50,001-$100,000 = $5,000 envío, más de $100,000 = envío gratis. Las reglas se evalúan automáticamente en el checkout. | RI-079 | Rango de precio mínimo, rango de precio máximo, costo de envío para ese rango, estado de la regla (activa/inactiva) y orden de prioridad de evaluación. |
| Proceso de Checkout y Pagos | Registrar cuenta bancaria | RF-080 | El sistema debe permitir registrar cuentas bancarias de la empresa para recibir transferencias, con información completa del banco y titular. | RN-080 | Solo los administradores pueden gestionar las cuentas bancarias. Los datos se almacenan de forma segura y cifrada. Los clientes ven solo las cuentas activas durante el proceso de pago. Siempre debe haber al menos una cuenta activa para recibir pagos. | RI-080 | Código del banco (seleccionado de lista de bancos colombianos), número de cuenta (cifrado), tipo de cuenta (ahorros/corriente), titular de la cuenta, tipo de identificación, número de identificación, correo de contacto, teléfono y estado (activa/inactiva). |
| Proceso de Checkout y Pagos | Mostrar cuentas bancarias | RF-081 | El sistema debe permitir visualizar el listado completo de cuentas bancarias configuradas con su información y estado. | RN-081 | El listado muestra todas las cuentas bancarias con banco, número de cuenta parcialmente oculto (por seguridad), tipo de cuenta, titular, estado y opciones de edición. Las cuentas activas se destacan visualmente. Mínimo debe existir una cuenta activa siempre. | RI-081 | Listado de cuentas con: logo del banco, nombre del banco, número de cuenta parcialmente oculto (XXXX-XXXX-1234), tipo de cuenta, titular, estado (activa/inactiva) y opciones de acciones (editar, activar/desactivar). |
| Proceso de Checkout y Pagos | Actualizar cuenta bancaria | RF-082 | El sistema debe permitir modificar información de cuentas bancarias existentes o activar/desactivar según necesidades operativas. | RN-082 | Puedes actualizar datos de contacto, cambiar el estado de la cuenta o incluso cambiar el número de cuenta. No puedes desactivar la última cuenta activa (debe haber mínimo una). Los cambios en cuentas activas se reflejan inmediatamente en el proceso de pago. | RI-082 | Identificador de la cuenta, nuevos valores para: número de cuenta, tipo de cuenta, titular, identificación, contacto, estado, verificación de mínimo una cuenta activa, usuario que modifica y fecha de actualización. |
| Proceso de Checkout y Pagos | Asistente de Direcciones GPS | RF-083 | El formulario de direcciones debe ofrecer autocompletado usando OpenStreetMap y permitir convertir coordenadas en direcciones legibles para guardar ubicaciones precisas con un clic. | RN-083 | Las búsquedas requieren mínimo dos caracteres, devuelven hasta 5 resultados enfocados en Colombia y muestran barrio, ciudad y coordenadas. El servicio que convierte coordenadas en direcciones valida rangos seguros y guarda la ubicación completa aunque falle el autocompletado. | RI-083 | Datos por consulta: texto buscado, lista de resultados (latitud, longitud, nombre mostrado, barrio, ciudad, país), dirección confirmada, coordenadas finales y sello de tiempo para auditoría y control de uso de la API pública. |
| Gestión de Órdenes y Postventa | Listar todas las órdenes | RF-084 | El sistema debe permitir a los administradores visualizar el listado completo de todas las órdenes con filtros por estado, fecha, cliente y método de pago. | RN-084 | Los administradores ven todas las órdenes del sistema ordenadas por fecha (las más recientes primero). Puedes filtrar por: pendientes, pagadas, en preparación, enviadas, entregadas o canceladas. También puedes buscar por número de orden o cliente. | RI-084 | Listado de órdenes con: número de orden, fecha, cliente, total, estado del pedido, estado del pago, método de pago y acciones disponibles (ver detalle, editar, cambiar estado, eliminar). |
| Gestión de Órdenes y Postventa | Ver detalle de orden | RF-085 | El sistema debe permitir ver el detalle completo de cada orden: cliente, productos, dirección, pagos, comprobante subido e historial de estados. | RN-085 | El detalle de la orden muestra toda la información: datos del cliente, productos comprados con cantidades y precios, dirección completa con mapa, comprobante de pago (si aplica), historial de cambios de estado con fechas y quién los hizo. | RI-085 | Detalle completo: número de orden, información del cliente, productos con variantes, totales desglosados, dirección con coordenadas GPS, comprobante de pago (visualización/descarga), historial de estados con fechas y usuarios responsables. |
| Gestión de Órdenes y Postventa | Cambiar estado de orden | RF-086 | El sistema debe permitir a los administradores cambiar el estado de las órdenes (pendiente, pagado, en preparación, enviado, entregado, cancelado). | RN-086 | Cada cambio de estado queda registrado automáticamente con quién lo hizo y cuándo. Si cambias el estado a "entregado", el sistema registra la fecha de entrega final. Si cancelas, debe indicar el motivo y el stock se reintegra automáticamente. | RI-086 | Identificador de la orden, estado anterior, estado nuevo, motivo del cambio (opcional para cancelación), usuario administrador que realiza el cambio, fecha y hora del cambio y registro en historial de estados. |
| Gestión de Órdenes y Postventa | Actualizar estado de pago | RF-087 | El sistema debe permitir actualizar el estado de pago de las órdenes después de verificar los comprobantes de transferencia. | RN-087 | Para órdenes con transferencia bancaria, el administrador debe verificar el comprobante subido y marcar el pago como verificado, rechazado o pendiente. Si se rechaza, debe indicar el motivo para notificar al cliente. | RI-087 | Identificador de la orden, estado de pago anterior, nuevo estado de pago (pendiente/verificado/rechazado), motivo (si es rechazo), administrador que verifica, fecha de verificación y notificación automática al cliente. |
| Gestión de Órdenes y Postventa | Eliminar orden | RF-088 | El sistema debe permitir a los administradores eliminar órdenes individuales después de confirmar la acción. | RN-088 | Solo se pueden eliminar órdenes que estén en estado cancelado o rechazado. No puedes eliminar órdenes activas. El sistema pedirá confirmación antes de eliminar. La eliminación queda registrada en auditoría con el motivo. | RI-088 | Identificador de la orden, verificación de estado (solo canceladas/rechazadas), motivo de eliminación, usuario administrador que elimina, fecha de eliminación y registro en auditoría. |
| Gestión de Órdenes y Postventa | Eliminar órdenes masivamente | RF-089 | El sistema debe permitir seleccionar múltiples órdenes y eliminarlas en una sola operación masiva. | RN-089 | Puedes seleccionar múltiples órdenes (máximo 100 a la vez) y eliminarlas todas juntas. Solo se eliminarán las que cumplan con los criterios (canceladas/rechazadas). El sistema mostrará un resumen de cuántas se eliminaron exitosamente y cuántas no. | RI-089 | Listado de identificadores de órdenes seleccionadas, validación individual de cada una, resultado de la operación (exitosas/fallidas), usuario administrador, motivo masivo y fecha de eliminación masiva. |
| Gestión de Órdenes y Postventa | Ver mis órdenes | RF-090 | El sistema debe permitir a los usuarios visualizar el historial completo de sus propias órdenes ordenadas por fecha. | RN-090 | Puedes ver todas tus compras realizadas ordenadas de la más reciente a la más antigua. Cada orden muestra: número, fecha, productos (cantidad de artículos), total, estado actual y estado de pago. Solo ves tus propias órdenes, no las de otros clientes. | RI-090 | Historial de órdenes del usuario con: número de orden, fecha de compra, resumen de productos (cantidad de ítems), total pagado, estado actual, estado de pago y botón para ver detalle. |
| Gestión de Órdenes y Postventa | Ver detalle de mi orden | RF-091 | El sistema debe permitir a los usuarios ver el detalle completo de cada una de sus órdenes con productos, dirección, pagos y rastreo. | RN-091 | En el detalle de tu orden puedes ver: productos comprados con fotos, color y talla, dirección de envío con mapa, totales desglosados (subtotal, descuento, envío, total), comprobante subido (si aplica) e historial de estados con fechas. | RI-091 | Detalle de la orden del usuario: número, fecha, productos con imágenes y detalles, dirección completa con visualización en mapa, subtotal, descuento, envío, total, comprobante de pago, historial de estados con línea de tiempo visual. |
| Gestión de Órdenes y Postventa | Rastrear orden en tiempo real | RF-092 | El sistema debe permitir a los usuarios rastrear el estado de sus órdenes en tiempo real mediante una línea de tiempo visual con cada etapa del proceso. | RN-092 | Puedes rastrear tu pedido mediante una línea de tiempo que muestra cada estado con fecha y hora: recibido, pago verificado, en preparación, enviado y entregado. Los estados completados se muestran en verde, el estado actual en azul y los pendientes en gris. | RI-092 | Estado actual de la orden, historial completo de estados con fechas y horas, representación visual en línea de tiempo, porcentaje de progreso y tiempo estimado de entrega (si aplica). |
| Gestión de Órdenes y Postventa | Enviar factura tras entrega | RF-093 | Cuando un administrador marca una orden como entregada, el sistema debe generar la factura en PDF, enviarla por correo electrónico y registrar una notificación para el cliente. | RN-093 | El servicio arma la factura con los datos completos de la orden, adjunta el PDF desde facturacion@angelow.com y deja un registro en notificaciones para que el cliente vea que la entrega fue confirmada. Si el correo falla, se escribe en el log y el aviso interno igual se crea. | RI-093 | Correo del cliente, nombre del destinatario, número de pedido/factura, lista de productos con imágenes, subtotal, descuentos, envío, total pagado, contenido del PDF, fecha de envío y registro de notificación (tipo, mensaje, entidad relacionada). |
| Gestión de Órdenes y Postventa | Notificar cancelaciones y reembolsos | RF-094 | Al cancelar un pedido o registrar un reembolso, el sistema debe avisar al cliente por correo, crear notificaciones en la plataforma y dejar trazabilidad del movimiento negativo en las transacciones. | RN-094 | Las cancelaciones envían un correo con detalle del pedido, plazos del reembolso y crean una notificación informando el motivo. Los reembolsos generan un registro negativo en payment_transactions con la referencia correspondiente y disparan notificaciones de estado y de pago. | RI-094 | Datos de la orden afectada, listado de productos, correo del cliente, monto devuelto, referencia del pago, identificador del administrador, registro negativo en `payment_transactions`, historial de estado actualizado y notificaciones creadas. |
| Gestión de Órdenes y Postventa | Registro automático de cambios | RF-095 | El sistema debe registrar automáticamente todos los cambios en órdenes: creación, cambio de estado, actualización de pago y eliminación. | RN-095 | Cada cambio en órdenes queda registrado permanentemente: qué cambió (estado, pago, dirección), valor anterior, valor nuevo, quién lo hizo (cliente o administrador), desde dónde (dirección IP) y cuándo (fecha y hora exacta). Estos registros no pueden modificarse ni eliminarse, garantizando trazabilidad completa. | RI-095 | Registro de auditoría con: identificador de la orden, tipo de cambio (estado/pago/dirección/productos), campo modificado, valor anterior en formato JSON, valor nuevo en formato JSON, usuario ejecutor (ID y nombre), dirección IP, fecha y hora del cambio. |
| Gestión de Órdenes y Postventa | Consulta de auditoría | RF-096 | El sistema debe permitir a los administradores consultar el historial completo de cambios de cualquier orden para resolución de disputas. | RN-096 | Los reportes de auditoría de órdenes son filtrados por: número de orden específico, rango de fechas, tipo de cambio y usuario ejecutor. Sirven para resolver disputas con clientes, identificar errores operativos, análisis de tiempos de procesamiento y cumplimiento con auditorías contables y legales. | RI-096 | Historial completo de cambios de la orden con: cronología temporal, tipo de cada acción, usuario responsable, valores antes/después, dirección IP y exportable a PDF para documentación legal o resolución de disputas. |
| Gestión de Órdenes y Postventa | Marcar órdenes como vistas | RF-097 | El sistema debe registrar automáticamente cuando un administrador visualiza una orden por primera vez para actualizar el contador de órdenes nuevas. | RN-097 | Cuando entras a la sección de órdenes, todas las órdenes que aparecen en el listado se marcan automáticamente como vistas por ti. El contador de órdenes nuevas en el menú se actualiza inmediatamente. Cada administrador tiene su propio contador independiente de órdenes no vistas. | RI-097 | Registro de visualización con: identificador de la orden, identificador del administrador, fecha y hora de primera visualización, marca de vista única (no se registra si ya fue vista por ese administrador) y actualización del contador del menú. |
| Gestión de Órdenes y Postventa | Mostrar contador de nuevas | RF-098 | El sistema debe mostrar un contador en el menú de administración indicando cuántas órdenes nuevas aún no han sido visualizadas por el administrador actual. | RN-098 | El contador de órdenes nuevas aparece como badge numérico rojo en el menú "Órdenes". Se actualiza en tiempo real cuando entran nuevos pedidos o cuando visualizas las órdenes. Si no hay órdenes nuevas, el badge no se muestra. Cada administrador ve solo su propio contador. | RI-098 | Cantidad de órdenes nuevas sin visualizar por el administrador actual, identificador del administrador, actualización en tiempo real del contador, visualización en badge numérico rojo y eliminación del badge cuando el contador llega a cero. |
| Gestión de Órdenes y Postventa | Cancelar pedido en línea | RF-099 | Desde el historial de pedidos el cliente debe poder cancelar órdenes en estado pendiente o en preparación, recibiendo una confirmación inmediata y el compromiso de gestionar el reembolso por el mismo medio de pago. | RN-099 | El servicio valida que la orden pertenezca al usuario y que el estado permita cancelación. Al confirmar, cambia el estado a "cancelado", ajusta el estado de pago a "reembolsado", envía las notificaciones correspondientes y registra la acción en el historial. | RI-099 | Información almacenada: id de la orden, usuario solicitante, estado anterior y nuevo, estado de pago resultante, motivo automático, registro de notificación enviada, mensaje mostrado y fecha/hora de la cancelación. |
| Gestión de Órdenes y Postventa | Notificar entrega con factura | RF-100 | Cuando una orden pasa a "entregada" el sistema debe generar el PDF de la factura, enviarlo por correo y registrar una notificación interna para el cliente sin intervención manual. | RN-100 | El proceso arma el paquete completo (datos de cliente, productos, envío), genera el PDF con la plantilla disponible, envía el correo con la factura adjunta y luego crea un registro en el centro de notificaciones ligado a la orden. | RI-100 | Información enviada: datos de la orden (cliente, contacto, dirección, método de pago), listado de ítems con imágenes, nombre del archivo PDF, correo destinatario, estado del envío y notificación creada (título, mensaje, referencia del pedido). |
| Gestión de Órdenes y Postventa | Gestionar cancelaciones y reembolsos | RF-101 | Al cancelar o reembolsar pedidos, el sistema debe crear notificaciones, enviar correos y registrar el movimiento negativo en el historial de pagos para dejar trazabilidad completa. | RN-101 | Los procesos de cancelación y reembolso validan que la orden exista, actualizan estados de pago a "reembolsado", crean entradas en el historial de estado, generan correos personalizados y, si no existía, registran un movimiento financiero negativo como evidencia. | RI-101 | Datos capturados: id de la orden, usuario afectado, monto reembolsado, referencia del pago, pasarela (si aplica), id del administrador, notificación enviada, correo disparado y movimiento financiero negativo con nota de auditoría. |
| Administración y Reportes | Moderación de reseñas (Admin) | RF-102 | El sistema debe permitir a los administradores moderar reseñas de productos: aprobar, rechazar o eliminar reseñas según políticas de la tienda. | RN-102 | Los administradores pueden ver todas las reseñas pendientes de moderación en un panel centralizado. Pueden aprobar reseñas apropiadas, rechazar las que violan políticas (lenguaje ofensivo, spam) o eliminar reseñas fraudulentas. Cada acción queda registrada con el administrador responsable y la fecha. | RI-102 | Identificador de la reseña, acción realizada (aprobar/rechazar/eliminar), motivo del rechazo (si aplica), administrador que modera, fecha de moderación, estado resultante de la reseña y notificación al usuario (si aplica). |
| Administración y Reportes | Verificar compra para reseña | RF-103 | El sistema debe verificar automáticamente si un usuario ha comprado un producto antes de permitirle escribir una reseña, marcando las reseñas verificadas. | RN-103 | Solo los usuarios que han comprado y recibido un producto pueden dejar reseñas verificadas. El sistema busca en el historial de órdenes completadas del usuario. Si encuentra el producto, la reseña se marca con badge "Compra Verificada". Esto aumenta la confianza de otros clientes. | RI-103 | Identificador del usuario, identificador del producto, búsqueda en órdenes completadas, identificador de la orden que contiene el producto (si existe), indicador de compra verificada (sí/no) y fecha de la compra verificada. |
| Administración y Reportes | Eliminar reseña (Admin) | RF-104 | El sistema debe permitir a los administradores eliminar reseñas inapropiadas, fraudulentas o que violan las políticas de la tienda. | RN-104 | Los administradores pueden eliminar cualquier reseña con motivo justificado (spam, lenguaje ofensivo, contenido inapropiado, fraude). Al eliminar, se borran también las imágenes asociadas y los votos. El usuario recibe notificación explicando el motivo. La acción queda registrada en auditoría. | RI-104 | Identificador de la reseña, motivo de eliminación, administrador que elimina, fecha de eliminación, eliminación de imágenes y votos asociados, notificación al usuario y registro en auditoría. |
| Administración y Reportes | Gestionar preguntas (Admin) | RF-105 | El sistema debe permitir a los administradores gestionar preguntas de productos: ver, responder, editar respuestas o eliminar preguntas inapropiadas. | RN-105 | Los administradores ven todas las preguntas pendientes y respondidas en un panel centralizado. Pueden responder preguntas pendientes, editar respuestas existentes para corregir información o eliminar preguntas inapropiadas (spam, ofensivas). Cada acción queda registrada. | RI-105 | Identificador de la pregunta, acción realizada (responder/editar/eliminar), texto de la respuesta (si aplica), administrador responsable, fecha de la acción, estado resultante y notificación al usuario. |
| Administración y Reportes | Eliminar pregunta (Admin) | RF-106 | El sistema debe permitir a los administradores eliminar preguntas inapropiadas o spam, eliminando también todas las respuestas asociadas. | RN-106 | Los administradores pueden eliminar preguntas que sean spam, ofensivas o inapropiadas. Al eliminar una pregunta, se borran también todas sus respuestas en cascada. El sistema pedirá confirmación antes de eliminar. La acción queda registrada en auditoría con el motivo. | RI-106 | Identificador de la pregunta, motivo de eliminación, administrador que elimina, eliminación en cascada de respuestas, fecha de eliminación y registro en auditoría. |
| Administración y Reportes | Exportar órdenes a PDF | RF-107 | El sistema debe permitir generar documentos PDF profesionales de órdenes individuales o múltiples con formato de factura. | RN-107 | Los PDF de órdenes se generan con diseño profesional: logo de la empresa, información corporativa (NIT, dirección), datos completos del cliente, productos con imágenes, totales desglosados, método de pago, código de verificación QR y términos y condiciones. Cumple con requisitos legales de facturación. | RI-107 | Documento PDF con: encabezado corporativo (logo, datos empresa), número de orden, fecha, información del cliente, dirección de envío, tabla de productos con cantidades y precios, subtotal, descuentos, envío, total, método de pago, código QR y pie de página legal. |
| Administración y Reportes | Exportar productos a CSV | RF-108 | El sistema debe permitir exportar el catálogo completo de productos a formato CSV respetando filtros aplicados. | RN-108 | El archivo CSV contiene toda la información del catálogo: identificador, nombre, descripción, categoría, género, precio, variantes de color, variantes de talla, stock total, estado y fecha de creación. Usa punto y coma como separador y encabezados en español. Compatible con Excel, Google Sheets y sistemas empresariales. | RI-108 | Archivo CSV con columnas: ID, Nombre, Descripción, Categoría, Género, Precio, Colores Disponibles, Tallas Disponibles, Stock Total, Estado, Fecha Creación. Delimitador punto y coma, codificación UTF-8 con BOM para caracteres especiales. |
| Administración y Reportes | Exportar clientes a Excel | RF-109 | El sistema debe permitir exportar el listado de clientes a formato Excel con información de contacto y estadísticas de compras. | RN-109 | El archivo Excel de clientes incluye: nombre, correo, teléfono, fecha de registro, cantidad de órdenes realizadas, total gastado, fecha de última compra y estado de la cuenta. Los datos personales están protegidos y solo administradores pueden exportarlos. Útil para campañas de marketing y análisis CRM. | RI-109 | Archivo Excel con columnas: ID Cliente, Nombre Completo, Correo Electrónico, Teléfono, Fecha Registro, Total Órdenes, Total Gastado, Fecha Última Compra, Estado Cuenta. Formato XLSX compatible con Excel 2010 y posteriores. |
| Administración y Reportes | Informe de clientes | RF-110 | El sistema debe generar informes de clientes con estadísticas: total registrados, clientes con compras, clientes sin compras, cliente con mayor gasto. | RN-110 | El informe de clientes muestra métricas del negocio: cuántos clientes están registrados, cuántos han comprado al menos una vez, cuántos nunca han comprado, quién es el cliente que más ha gastado y el valor promedio de compra por cliente. Puedes filtrar por período de tiempo. | RI-110 | Total de clientes registrados, clientes con órdenes completadas, clientes sin compras, cliente con mayor gasto total (nombre y monto), valor promedio de compra, tasa de conversión (porcentaje que ha comprado) y gráfico de tendencia de registro. |

**FIN DE PARTE 2 - Continúa en PARTE_3_Marketing_Admin.md**

# Matriz de Requisitos Completa - Sistema Angelow

Esta matriz consolida todos los requisitos funcionales (RF), reglas de negocio (RN) y requisitos de información (RI) del sistema Angelow, organizados por módulos.

## Parte 1: Usuarios y Autenticación

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Gestión de Usuarios** | Registro de usuarios | **RF-001** | El sistema debe permitir a los visitantes registrarse creando una cuenta nueva con correo electrónico, nombre completo, teléfono y contraseña. | **RN-001** | Para crear una cuenta, debes aceptar obligatoriamente los términos y condiciones marcando la casilla de aceptación. Sin esta confirmación no se puede completar el registro. | **RI-001** | Nombre completo del usuario, correo electrónico único, número de teléfono, contraseña encriptada, fecha de registro, aceptación de términos y condiciones. |
| | Inicio de sesión | **RF-002** | El sistema debe permitir a los usuarios registrados ingresar a su cuenta mediante correo electrónico y contraseña. | **RN-002** | Si ingresas mal tu contraseña 5 veces seguidas, tu cuenta se bloqueará temporalmente por 15 minutos para protegerla de intentos de acceso no autorizados. | **RI-002** | Credenciales de acceso (correo y contraseña), contador de intentos fallidos, estado de bloqueo y fecha/hora del último acceso exitoso. |
| | Recuperar contraseña | **RF-003** | El sistema debe permitir a los usuarios restablecer su contraseña mediante un enlace seguro enviado a su correo electrónico. | **RN-003** | El enlace para restablecer la contraseña es de un solo uso y caduca después de 1 hora. Si no lo usas en ese tiempo, deberás solicitar uno nuevo. | **RI-003** | Correo electrónico del solicitante, token único de recuperación generado, fecha de expiración del token y nueva contraseña encriptada una vez cambiada. |
| | Panel de Usuario | **RF-004-B** | El sistema debe proporcionar un panel de control personal donde el usuario visualice un resumen de sus pedidos recientes, direcciones guardadas y productos favoritos. | **RN-004-B** | El panel es la página principal del usuario autenticado. Muestra estadísticas rápidas (cuántos pedidos, favoritos) y accesos directos a las secciones más usadas. También ofrece recomendaciones personalizadas basadas en su actividad. | **RI-004-B** | Contadores de pedidos, direcciones y favoritos. Lista de últimos 3 pedidos con estado. Productos recomendados personalizados. Accesos directos a gestión de cuenta. |
| **Google OAuth** | Registro con Google | **RF-005** | El sistema debe permitir a los visitantes registrarse usando su cuenta de Google, creando automáticamente su perfil con los datos de Google. | **RN-005** | Si te registras con Google, tu correo, nombre y foto se importan automáticamente desde tu cuenta de Google. No necesitas crear ni recordar una contraseña adicional para la tienda. | **RI-005** | Identificador único de Google del usuario, correo electrónico de Google, nombre completo de Google, foto de perfil de Google y tokens de acceso y actualización de Google. |
| | Inicio de sesión con Google | **RF-006** | El sistema debe permitir a los usuarios iniciar sesión usando su cuenta de Google sin necesidad de contraseña. | **RN-006** | Cuando inicias sesión con Google, el sistema valida automáticamente tu identidad con los servidores de Google. No necesitas ingresar contraseña. Si es tu primera vez, se crea automáticamente tu cuenta. | **RI-006** | Identificador de Google para validación, tokens temporales de autenticación de Google y fecha y hora del último inicio de sesión con Google. |
| **Direcciones GPS** | Agregar dirección | **RF-007** | El sistema debe permitir a los usuarios agregar nuevas direcciones de envío con coordenadas GPS, nombre del receptor y teléfono de contacto. | **RN-007** | Al guardar una dirección de envío, debes incluir obligatoriamente su ubicación exacta en el mapa (coordenadas GPS). Esto es esencial para que los repartidores puedan llegar precisamente a tu domicilio. | **RI-007** | Dirección completa de texto, barrio, ciudad, coordenadas GPS obligatorias (latitud y longitud), nombre del receptor, teléfono del receptor e instrucciones especiales de entrega opcionales. |
| | Ver direcciones | **RF-008** | El sistema debe permitir a los usuarios visualizar todas sus direcciones guardadas con su información completa y ubicación en el mapa. | **RN-008** | Puedes guardar múltiples direcciones de envío (casa, trabajo, casa de familiares). Cada una se muestra con su mapa de ubicación y puedes elegir cuál usar al momento de hacer una compra. | **RI-008** | Listado completo de direcciones del usuario: dirección completa, barrio, ciudad, coordenadas GPS, nombre y teléfono del receptor, indicador de dirección predeterminada y fecha de creación. |
| | Editar dirección | **RF-009** | El sistema debe permitir a los usuarios modificar cualquier dato de sus direcciones guardadas, incluyendo actualizar las coordenadas GPS. | **RN-009** | Puedes actualizar cualquier dato de tus direcciones: cambiar el nombre del receptor, actualizar el teléfono, modificar instrucciones de entrega o corregir la ubicación en el mapa arrastrando el marcador. | **RI-009** | Identificador de la dirección a modificar, nuevos valores para: dirección, barrio, coordenadas GPS, nombre receptor, teléfono receptor, instrucciones de entrega y fecha de última actualización. |
| | Eliminar dirección | **RF-010** | El sistema debe permitir a los usuarios eliminar direcciones que ya no utilizan de su lista de direcciones guardadas. | **RN-010** | Antes de eliminar una dirección, el sistema te pedirá confirmación para evitar borrados accidentales. No puedes eliminar una dirección que esté asociada a pedidos pendientes o en proceso de entrega. | **RI-010** | Identificador de la dirección a eliminar, verificación de que no hay pedidos activos usando esa dirección y fecha de eliminación para auditoría. |
| **Sistema de Roles** | Control de acceso por roles | **RF-011** | El sistema debe redirigir automáticamente a cada usuario a su panel correspondiente según su rol al iniciar sesión (admin, customer). | **RN-011** | Cada tipo de usuario tiene acceso solo a las secciones que le corresponden. Los clientes ven su perfil y pedidos, y los administradores el panel completo de gestión de la tienda. | **RI-011** | Rol del usuario (admin o customer), página de inicio correspondiente al rol, permisos asociados al rol y fecha de asignación del rol. |
| | Restricción de acceso | **RF-012** | El sistema debe bloquear el acceso a secciones no autorizadas y redirigir al usuario a su área correspondiente si intenta acceder a URLs restringidas. | **RN-012** | Si intentas acceder a una sección no autorizada para tu rol (por ejemplo, un cliente intentando entrar al panel de administración), serás redirigido automáticamente a tu panel principal con un mensaje informativo. | **RI-012** | URL solicitada, rol del usuario que intenta acceder, permisos requeridos para esa URL, acción tomada (permitir o redirigir) y registro del intento de acceso para auditoría. |
| **Config Cuenta Usuario** | Ver configuración | **RF-013** | El sistema debe permitir a los usuarios visualizar sus preferencias de notificaciones, configuración de privacidad y opciones de cuenta. | **RN-013** | En tu configuración de cuenta puedes ver y ajustar qué notificaciones deseas recibir por correo: actualizaciones de tus pedidos, alertas de productos favoritos y ofertas especiales. | **RI-013** | Preferencias de notificaciones por correo (órdenes, alertas de productos, ofertas), configuración de privacidad actual y opciones de seguridad de la cuenta. |
| | Actualizar configuración | **RF-014** | El sistema debe permitir a los usuarios modificar sus preferencias de notificaciones, cambiar su contraseña y ajustar opciones de privacidad. | **RN-014** | Puedes activar o desactivar cada tipo de notificación individualmente según tu preferencia. Para cambiar la contraseña, debes ingresar primero tu contraseña actual como medida de seguridad. | **RI-014** | Nuevas preferencias de notificaciones seleccionadas, contraseña actual para validación, nueva contraseña encriptada, opciones de privacidad actualizadas y fecha de modificación de la configuración. |
| **Auditoría Usuarios** | Registro automático de cambios | **RF-015** | El sistema debe registrar automáticamente todos los cambios en las cuentas de usuario (modificación de datos, cambio de rol, cambio de contraseña). | **RN-015** | Todas las modificaciones en cuentas de usuario quedan registradas permanentemente con detalles de qué cambió, quién lo hizo, desde dónde (dirección IP) y cuándo. Estos registros no pueden modificarse ni eliminarse. | **RI-015** | Identificador del usuario modificado, tipo de cambio realizado (perfil, rol, contraseña, estado), valores anteriores y nuevos, identificador del usuario que hizo el cambio, dirección IP, fecha y hora del cambio. |
| | Consulta de auditoría | **RF-016** | El sistema debe permitir a los administradores consultar el historial completo de cambios de cualquier usuario para fines de auditoría. | **RN-016** | Solo los administradores pueden consultar los registros de auditoría de usuarios. Estos registros muestran cada cambio con lujo de detalles para tener trazabilidad completa y cumplimiento de protección de datos. | **RI-016** | Historial completo de cambios del usuario filtrable por: tipo de acción, rango de fechas y usuario ejecutor. Cada registro incluye acción, valores antes/después, IP y fecha/hora. |

<!-- NEXT_SECTION -->

## Parte 2: Productos e Inventario

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Gestión de Productos** | Crear producto | **RF-017** | El sistema debe permitir a los administradores crear nuevos productos con información básica, precios y estado. | **RN-017** | Todo producto debe tener obligatoriamente un nombre único y un precio base mayor a cero. El "slug" (URL amigable) se genera automáticamente del nombre pero puede editarse. | **RI-017** | Nombre del producto, slug único, descripción corta, descripción detallada, precio base, precio promocional (opcional), estado (activo/borrador) y categoría principal. |
| | Listar productos | **RF-018** | El sistema debe permitir visualizar el catálogo completo de productos con filtros por categoría, estado y stock. | **RN-018** | El listado muestra una vista rápida del estado del catálogo. Los productos con stock bajo (menos de 5 unidades) se resaltan en amarillo y los agotados en rojo para facilitar la gestión. | **RI-018** | Listado con: imagen principal, nombre, SKU, precio, stock total, categoría, estado y opciones de acciones (editar, eliminar, ver). |
| | Editar producto | **RF-019** | El sistema debe permitir modificar toda la información de un producto existente, incluyendo precios, descripciones y estado. | **RN-019** | Al cambiar el precio de un producto, el sistema guarda un historial del cambio. Si desactivas un producto, este deja de ser visible inmediatamente en la tienda para los clientes. | **RI-019** | Identificador del producto, nuevos valores para todos los campos editables, usuario que modifica y fecha de última actualización. |
| | Eliminar producto | **RF-020** | El sistema debe permitir eliminar productos que no tienen historial de ventas (órdenes asociadas). | **RN-020** | Por seguridad y consistencia de datos, no puedes eliminar un producto que ya ha sido comprado. En su lugar, debes desactivarlo (estado inactivo) para que no se pueda comprar más pero se mantenga el historial. | **RI-020** | Identificador del producto a eliminar, verificación de órdenes asociadas (si existen, bloquear eliminación) y confirmación de acción. |
| **Variantes de Producto** | Gestión de tallas y colores | **RF-021** | El sistema debe permitir configurar múltiples variantes para un mismo producto combinando tallas y colores con stocks independientes. | **RN-021** | Cada combinación de talla y color (ej: Camiseta Roja - Talla M) maneja su propio inventario. Si una variante específica se agota, solo esa opción aparece como no disponible, permitiendo comprar las otras. | **RI-021** | Lista de variantes con: color, talla, stock específico, precio diferenciado (opcional) y SKU específico para la variante. |
| | Visualización de variantes | **RF-022** | El sistema debe mostrar en la ficha del producto las opciones de color y talla disponibles para que el cliente seleccione. | **RN-022** | Al seleccionar un color, se actualizan las tallas disponibles para ese color específico. Las combinaciones agotadas se muestran tachadas o deshabilitadas visualmente. | **RI-022** | Matriz de disponibilidad color-talla, stocks por variante y selectores visuales en la interfaz de usuario. |
| **Categorías** | Gestión de categorías | **RF-023** | El sistema debe permitir crear, editar y eliminar categorías para organizar los productos del catálogo. | **RN-023** | Las categorías pueden tener una imagen representativa y una descripción para SEO. Una categoría no puede eliminarse si tiene productos asignados; primero debes reasignar o eliminar esos productos. | **RI-023** | Nombre de la categoría, slug, descripción, imagen destacada, categoría padre (para subcategorías) y estado. |
| | Árbol de categorías | **RF-024** | El sistema debe permitir organizar las categorías en una estructura jerárquica (categorías y subcategorías). | **RN-024** | Se permite hasta 3 niveles de profundidad (Categoría > Subcategoría > Sub-subcategoría) para mantener la navegación simple y comprensible para el usuario. | **RI-024** | Estructura jerárquica de categorías, relaciones padre-hijo y orden de visualización en el menú. |
| | Asignación masiva | **RF-025** | El sistema debe permitir asignar o mover múltiples productos de una categoría a otra en una sola acción. | **RN-025** | Facilita la reorganización del catálogo. Al mover productos, se actualizan sus rutas de navegación (breadcrumbs) automáticamente. | **RI-025** | Lista de productos seleccionados, categoría origen, categoría destino y confirmación de la operación. |
| **Inventario** | Control de stock | **RF-026** | El sistema debe llevar un control automático del inventario, descontando unidades con cada venta aprobada. | **RN-026** | El stock se descuenta temporalmente al crear la orden y definitivamente al confirmar el pago. Si el pago falla o la orden se cancela, el stock se libera automáticamente para volver a estar disponible. | **RI-026** | Cantidad actual disponible por variante, cantidad reservada en órdenes pendientes y cantidad mínima para alerta de stock bajo. |
| | Ajuste manual de stock | **RF-027** | El sistema debe permitir a los administradores ajustar manualmente la cantidad de stock de cualquier producto o variante. | **RN-027** | Todo ajuste manual de inventario (entrada o salida) requiere ingresar una nota o motivo (ej: "Recepción de mercancía", "Producto dañado") para auditoría. | **RI-027** | Producto/variante afectado, cantidad a ajustar (+/-), motivo del ajuste, usuario que realiza el ajuste y fecha. |
| | Historial de movimientos | **RF-028** | El sistema debe registrar y permitir consultar todos los movimientos de inventario (ventas, devoluciones, ajustes manuales). | **RN-028** | Se mantiene un kardex completo. Cada movimiento de entrada o salida queda registrado cronológicamente para permitir rastrear discrepancias en el inventario. | **RI-028** | Tipo de movimiento, cantidad, stock anterior, stock nuevo, referencia (orden # o nota manual) y responsable. |
| | Alertas de stock bajo | **RF-029** | El sistema debe notificar a los administradores cuando el stock de un producto baje del umbral mínimo configurado. | **RN-029** | Cuando un producto llega a 5 unidades o menos, se envía una alerta al panel de administración y opcionalmente por correo para sugerir reabastecimiento. | **RI-029** | Listado de productos con stock crítico, cantidad actual y proveedor sugerido (si está configurado). |
| **Imágenes** | Galería de producto | **RF-030** | El sistema debe permitir subir múltiples imágenes para un mismo producto y ordenarlas mediante arrastrar y soltar. | **RN-030** | Se permiten hasta 10 imágenes por producto. Formatos aceptados: JPG, PNG, WEBP. Tamaño máximo 2MB por imagen. La primera imagen de la lista será la portada principal. | **RI-030** | Archivos de imagen, orden de visualización, texto alternativo (ALT) para accesibilidad y SEO. |
| | Optimización automática | **RF-031** | El sistema debe optimizar y redimensionar automáticamente las imágenes subidas para garantizar una carga rápida de la tienda. | **RN-031** | Al subir una imagen, el sistema genera versiones en varios tamaños (miniatura, catálogo, zoom) y comprime el archivo sin perder calidad visible para mejorar la velocidad del sitio. | **RI-031** | Rutas de las diferentes versiones de la imagen generadas y metadatos de la imagen original. |
| **Auditoría Productos** | Registro de cambios | **RF-032** | El sistema debe registrar quién creó, modificó o eliminó cada producto y cuándo ocurrió el evento. | **RN-032** | Cualquier cambio en el catálogo (precio, descripción, stock) deja una huella de auditoría. Esto permite identificar responsabilidades en caso de errores en la información publicada. | **RI-032** | Identificador del producto, acción realizada, usuario responsable, fecha/hora y campos afectados. |
| | Papelera de reciclaje | **RF-033** | El sistema debe contar con una papelera de reciclaje para productos eliminados, permitiendo su restauración por 30 días. | **RN-033** | Los productos eliminados (que no tenían ventas) van a una papelera temporal. Pueden ser restaurados con toda su información durante 30 días. Después de ese plazo, se borran permanentemente. | **RI-033** | Lista de productos en papelera, fecha de eliminación y fecha programada de borrado definitivo. |
| **Gestión de Precios** | Precios promocionales | **RF-034** | El sistema debe permitir configurar precios de oferta con fechas de inicio y fin programadas. | **RN-034** | Si un producto tiene precio de oferta vigente, se muestra el precio anterior tachado y el porcentaje de ahorro. Al finalizar la fecha, el precio vuelve automáticamente al normal. | **RI-034** | Precio de oferta, fecha de inicio, fecha de fin y cálculo automático del porcentaje de descuento mostrado. |
| | Actualización masiva precios | **RF-035** | El sistema debe permitir actualizar precios de múltiples productos simultáneamente mediante porcentaje o monto fijo. | **RN-035** | Permite aplicar cambios globales, por ejemplo: "Aumentar 5% a toda la categoría Zapatos". Requiere confirmación doble antes de aplicar para evitar errores masivos costosos. | **RI-035** | Criterio de selección de productos, tipo de ajuste (porcentaje/monto), valor del ajuste y resultado de la simulación antes de aplicar. |
| **Etiquetas y SEO** | Etiquetas de producto | **RF-036** | El sistema debe permitir asignar etiquetas (tags) a los productos para mejorar la búsqueda y filtrado. | **RN-036** | Las etiquetas funcionan como palabras clave adicionales (ej: "algodón", "verano", "vintage"). Ayudan a encontrar productos que no tienen esas palabras en el nombre o descripción. | **RI-036** | Lista de etiquetas asignadas a cada producto y nube de etiquetas populares. |
| | Configuración SEO | **RF-037** | El sistema debe permitir personalizar el título SEO y la meta-descripción de cada producto para mejorar el posicionamiento en Google. | **RN-037** | Si no se ingresa información SEO manual, el sistema usa por defecto el nombre y la descripción corta del producto. La URL (slug) debe ser única en todo el sitio. | **RI-037** | Meta título, meta descripción, palabras clave y vista previa de cómo se verá en resultados de búsqueda. |

<!-- NEXT_SECTION -->

## Parte 3: Carrito, Pagos y Órdenes

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Carrito de Compras** | Agregar al carrito | **RF-038** | El sistema debe permitir a los usuarios agregar productos al carrito seleccionando color, talla y cantidad deseada. | **RN-038** | Al agregar un producto al carrito, el sistema verifica inmediatamente si hay stock disponible del color y talla seleccionados. Si está agotado, se mostrará un mensaje informativo y no se podrá agregar. | **RI-038** | Identificador del producto, variante de color seleccionada, variante de talla seleccionada, cantidad a agregar, stock disponible de esa combinación, precio unitario y fecha de agregado al carrito. |
| | Ver carrito | **RF-039** | El sistema debe permitir a los usuarios visualizar todos los productos en su carrito con imagen, nombre, color, talla, cantidad, precio unitario y subtotal. | **RN-039** | En el carrito puedes ver todos los productos que vas a comprar con su foto, nombre, color, talla, precio y cantidad. El subtotal se calcula automáticamente multiplicando precio por cantidad. El total general se muestra al final. | **RI-039** | Listado de ítems del carrito con: identificador del ítem, producto con imagen, color y talla seleccionados, cantidad, precio unitario, subtotal del ítem, contador total de productos y suma total del carrito. |
| | Actualizar cantidad | **RF-040** | El sistema debe permitir modificar la cantidad de productos en el carrito, aumentando o disminuyendo según disponibilidad de stock. | **RN-040** | La cantidad en el carrito no puede superar las unidades disponibles en inventario. Si intentas agregar más de lo disponible, el sistema te informará cuántas unidades puedes comprar como máximo. Los totales se actualizan automáticamente sin recargar la página. | **RI-040** | Identificador del ítem del carrito, nueva cantidad solicitada, cantidad disponible en inventario, nueva cantidad validada (no puede exceder stock), nuevo subtotal calculado y fecha de actualización. |
| | Eliminar del carrito | **RF-041** | El sistema debe permitir eliminar productos individuales del carrito de compras de forma instantánea. | **RN-041** | Al eliminar un producto del carrito, se libera inmediatamente ese stock para que otros clientes puedan comprarlo. El carrito se actualiza automáticamente mostrando el nuevo total sin ese producto. | **RI-041** | Identificador del ítem a eliminar, producto eliminado (para confirmación), nuevo total del carrito sin ese ítem y fecha de eliminación. |
| | Compra inmediata | **RF-042** | El sistema debe permitir iniciar una compra inmediata desde la ficha de producto, creando un carrito temporal que lleva al cliente directamente al paso de envío sin mezclar esos artículos con su carrito habitual. | **RN-042** | Al usar "Comprar ahora" se crea un carrito aislado asociado al usuario o a su sesión. El sistema valida que el carrito pertenezca al cliente antes de continuar, elimina la bandera de compra inmediata tras usarla y, si no coincide, redirige al carrito estándar para evitar compras duplicadas. | **RI-042** | Identificador del carrito temporal, indicador buy_now, usuario y/o session_id asociados, productos y cantidades incluidos, hora de creación, subtotal calculado y referencia al carrito principal si existe. |
| **Proceso de Pago** | Paso 1: Revisar carrito | **RF-043** | El sistema debe mostrar el resumen completo del carrito en el primer paso del proceso de compra, con posibilidad de volver a modificar cantidades. | **RN-043** | Antes de proceder al pago, puedes revisar tu carrito completo. Todavía puedes modificar cantidades o eliminar productos. Solo los usuarios registrados e iniciados sesión pueden proceder a comprar. | **RI-043** | Resumen del carrito: listado de productos con cantidades, precios, subtotal, botón para continuar al siguiente paso y validación de usuario autenticado. |
| | Paso 2: Seleccionar dirección | **RF-044** | El sistema debe permitir seleccionar o agregar una dirección de envío de las guardadas, mostrando cada una con mapa y datos completos. | **RN-044** | Puedes elegir cualquiera de tus direcciones guardadas o agregar una nueva dirección durante el proceso de compra. La dirección debe tener coordenadas GPS obligatorias para que el repartidor pueda ubicarte fácilmente. | **RI-044** | Listado de direcciones del usuario, dirección seleccionada con: dirección completa, coordenadas GPS, nombre y teléfono del receptor, instrucciones de entrega y visualización en mapa. |
| | Paso 2: Calcular envío | **RF-045** | El sistema debe calcular automáticamente el costo de envío según el subtotal de la compra y las reglas de envío configuradas. | **RN-045** | El costo de envío varía según el total de tu compra. Compras pequeñas pagan más envío, compras medianas pagan menos, y compras grandes pueden tener envío gratis. El costo se calcula automáticamente al seleccionar la dirección. | **RI-045** | Subtotal de la compra, reglas de envío aplicables (monto mínimo, monto máximo, costo), costo de envío calculado, días estimados de entrega y total con envío incluido. |
| | Paso 2: Aplicar descuento | **RF-046** | El sistema debe permitir aplicar códigos de descuento válidos, validando su vigencia, usos disponibles y aplicabilidad a los productos del carrito. | **RN-046** | Puedes ingresar un código de descuento en esta etapa. El sistema verificará que sea válido, que no haya vencido, que no haya alcanzado su límite de usos y que aplique a los productos en tu carrito. Si es válido, verás el descuento reflejado inmediatamente. | **RI-046** | Código ingresado, validación del código (vigencia, usos, productos), tipo de descuento (porcentaje/monto fijo/envío gratis), valor del descuento, descuento aplicado calculado y nuevo total con descuento. |
| | Paso 2: Tipo de entrega | **RF-047** | El sistema debe mostrar todas las opciones activas de entrega (domicilio, express o recogida en tienda) como tarjetas seleccionables y recalcular al instante el costo y el tiempo de envío según la opción elegida. | **RN-047** | Los métodos de entrega provienen de la configuración y siempre se marca uno como predeterminado. Si el nombre o la descripción incluyen "tienda" o "recogida", la orden se marca como retiro en tienda, se muestran los datos del punto físico y se genera un enlace directo con la ruta sugerida en Google Maps. | **RI-047** | Catálogo de métodos activos con: identificador, nombre, descripción, ícono, costo base, tiempo estimado, indicador de recogida en tienda, enlace sugerido, coordenadas del punto físico y dirección de envío seleccionada por el cliente. |
| | Paso 3: Ver resumen final | **RF-048** | El sistema debe mostrar el resumen completo de la compra antes del pago: productos, dirección, envío, descuentos y total final. | **RN-048** | El resumen final muestra todos los detalles de tu compra claramente desglosados: subtotal de productos, descuento (si aplica), costo de envío y total a pagar. También verás la dirección de entrega y tiempo estimado. | **RI-048** | Resumen completo: productos con cantidades y precios, dirección de envío, subtotal, descuento aplicado, costo de envío, total final, método de pago seleccionado y botón para confirmar compra. |
| | Paso 3: Procesar pago por transferencia | **RF-049** | El sistema debe permitir realizar el pago mediante transferencia bancaria, mostrando los datos de la cuenta y permitiendo subir el comprobante de pago. | **RN-049** | Para pagar por transferencia, el sistema te muestra los datos bancarios de la empresa. Después de transferir, debes subir una foto del comprobante (JPG, PNG o PDF, máximo 5 MB). Tu pedido quedará pendiente de verificación hasta que confirmemos el pago. | **RI-049** | Información bancaria: banco, número de cuenta, tipo de cuenta, titular, identificación. Comprobante subido: archivo, ruta de almacenamiento, fecha de subida. Estado de la transacción: pendiente, verificado o rechazado. |
| | Paso 3: Validar comprobante y consentimiento | **RF-050** | El sistema debe exigir referencia bancaria, comprobante en formatos permitidos y aceptación de términos antes de crear la orden, registrar la transacción y limpiar el carrito. | **RN-050** | Solo se aceptan comprobantes JPG, PNG o PDF de máximo 5 MB, que se guardan en la carpeta de comprobantes con un nombre único. También se verifica que exista una cuenta bancaria activa y que el cliente marque la casilla de términos; de lo contrario, la compra no continúa. | **RI-050** | Número de referencia del pago, ruta del comprobante, tipo y tamaño del archivo, marca de aceptación de términos, identificador de la transacción, estado inicial del pago, identificador del descuento utilizado y totales finales (subtotal, envío, total). |
| | Paso 4: Confirmar orden | **RF-051** | El sistema debe crear la orden de compra, enviar correo de confirmación con PDF adjunto, limpiar el carrito y mostrar página de confirmación con número de orden. | **RN-051** | Al completar tu compra recibirás: 1) Una página de confirmación con tu número de pedido único, 2) Un correo electrónico con todos los detalles y PDF adjunto, 3) Tu carrito se vaciará automáticamente. El stock de los productos se descuenta inmediatamente. | **RI-051** | Orden creada con: número único de orden (ORD-YYYYMMDD-XXXXXX), identificador del usuario, productos y cantidades, dirección de envío, total, descuento, envío, estado inicial (pendiente), comprobante de pago subido y fecha de creación. |
| | Paso 4: Confirmación inteligente | **RF-052** | La vista de confirmación debe adaptarse según el tipo de entrega, mostrando instrucciones especiales para recogida en tienda, ofreciendo la descarga del PDF y manteniendo visible el número de pedido para futuras consultas. | **RN-052** | Si la orden es de recogida se muestra mapa con la ruta hacia la tienda, horarios y pasos "Listo para recoger". Para domicilios se despliega la línea de tiempo desde pago hasta entrega. En ambos casos se limpia el carrito, se mantienen descuentos consumidos como usados y solo se permite descargar el PDF si hay motor disponible. | **RI-052** | Número de orden, correo del cliente, dirección o punto de recogida, coordenadas guardadas, enlace a Google Maps, estados con fecha y hora, indicador `pdf_available`, bandera de limpieza de carrito/descuentos y registro del comprobante generado. |
| **Gestión de Órdenes Admin** | Listar todas las órdenes | **RF-053** | El sistema debe permitir a los administradores visualizar el listado completo de todas las órdenes con filtros por estado, fecha, cliente y método de pago. | **RN-053** | Los administradores ven todas las órdenes del sistema ordenadas por fecha (las más recientes primero). Puedes filtrar por: pendientes, pagadas, en preparación, enviadas, entregadas o canceladas. También puedes buscar por número de orden o cliente. | **RI-053** | Listado de órdenes con: número de orden, fecha, cliente, total, estado del pedido, estado del pago, método de pago y acciones disponibles (ver detalle, editar, cambiar estado, eliminar). |
| | Ver detalle de orden | **RF-054** | El sistema debe permitir ver el detalle completo de cada orden: cliente, productos, dirección, pagos, comprobante subido e historial de estados. | **RN-054** | El detalle de la orden muestra toda la información: datos del cliente, productos comprados con cantidades y precios, dirección completa con mapa, comprobante de pago (si aplica), historial de cambios de estado con fechas y quién los hizo. | **RI-054** | Detalle completo: número de orden, información del cliente, productos con variantes, totales desglosados, dirección con coordenadas GPS, comprobante de pago (visualización/descarga), historial de estados con fechas y usuarios responsables. |
| | Cambiar estado de orden | **RF-055** | El sistema debe permitir a los administradores cambiar el estado de las órdenes (pendiente, pagado, en preparación, enviado, entregado, cancelado). | **RN-055** | Cada cambio de estado queda registrado automáticamente con quién lo hizo y cuándo. Si cambias el estado a "entregado", el sistema registra la fecha de entrega final. Si cancelas, debes indicar el motivo y el stock se reintegra automáticamente. | **RI-055** | Identificador de la orden, estado anterior, estado nuevo, motivo del cambio (opcional para cancelación), usuario administrador que realiza el cambio, fecha y hora del cambio y registro en historial de estados. |
| | Actualizar estado de pago | **RF-056** | El sistema debe permitir actualizar el estado de pago de las órdenes después de verificar los comprobantes de transferencia. | **RN-056** | Para órdenes con transferencia bancaria, el administrador debe verificar el comprobante subido y marcar el pago como verificado, rechazado o pendiente. Si se rechaza, debe indicar el motivo para notificar al cliente. | **RI-056** | Identificador de la orden, estado de pago anterior, nuevo estado de pago (pendiente/verificado/rechazado), motivo (si es rechazo), administrador que verifica, fecha de verificación y notificación automática al cliente. |
| | Eliminar orden | **RF-057** | El sistema debe permitir a los administradores eliminar órdenes individuales después de confirmar la acción. | **RN-057** | Solo se pueden eliminar órdenes que estén en estado cancelado o rechazado. No puedes eliminar órdenes activas. El sistema pedirá confirmación antes de eliminar. La eliminación queda registrada en auditoría con el motivo. | **RI-057** | Identificador de la orden a eliminar, verificación de estado (solo canceladas/rechazadas), confirmación de eliminación, usuario que elimina y fecha de eliminación. |
| **Mis Órdenes Usuario** | Ver historial de órdenes | **RF-058** | El sistema debe permitir a los usuarios visualizar su historial completo de órdenes realizadas con estado actual y totales. | **RN-058** | En tu sección "Mis Pedidos" puedes ver todas las compras que has hecho. Se muestran ordenadas por fecha (las más recientes primero). Cada tarjeta muestra el número de orden, fecha, total y estado actual (ej: Enviado). | **RI-058** | Listado de órdenes del usuario con: número de orden, fecha, total, estado actual, cantidad de productos y enlace para ver detalle. |
| | Ver detalle de mi orden | **RF-060** | El sistema debe permitir a los usuarios ver el detalle completo de cualquiera de sus órdenes con productos, dirección, pagos y rastreo. | **RN-060** | En el detalle de tu orden puedes ver: productos comprados con fotos, color y talla, dirección de envío con mapa, totales desglosados (subtotal, descuento, envío, total), comprobante subido (si aplica) e historial de estados con fechas. | **RI-060** | Detalle de la orden del usuario: número, fecha, productos con imágenes y detalles, dirección completa con visualización en mapa, subtotal, descuento, envío, total, comprobante de pago, historial de estados con línea de tiempo visual. |
| | Rastrear orden en tiempo real | **RF-061** | El sistema debe permitir a los usuarios rastrear el estado de sus órdenes en tiempo real mediante una línea de tiempo visual con cada etapa del proceso. | **RN-061** | Puedes rastrear tu pedido mediante una línea de tiempo que muestra cada estado con fecha y hora: recibido, pago verificado, en preparación, enviado y entregado. Los estados completados se muestran en verde, el estado actual en azul y los pendientes en gris. | **RI-061** | Estado actual de la orden, historial completo de estados con fechas y horas, representación visual en línea de tiempo, porcentaje de progreso y tiempo estimado de entrega (si aplica). |
| **Postventa y Comunicaciones** | Enviar factura tras entrega | **RF-062** | Cuando un administrador marca una orden como entregada, el sistema debe generar la factura en PDF, enviarla por correo electrónico y registrar una notificación para el cliente. | **RN-062** | El servicio arma la factura con los datos completos de la orden, adjunta el PDF desde facturacion@angelow.com y deja un registro en notificaciones para que el cliente vea que la entrega fue confirmada. Si el correo falla, se escribe en el log y el aviso interno igual se crea. | **RI-062** | Correo del cliente, nombre del destinatario, número de pedido/factura, lista de productos con imágenes, subtotal, descuentos, envío, total pagado, contenido del PDF, fecha de envío y registro de notificación (tipo, mensaje, entidad relacionada). |
| | Notificar cancelaciones y reembolsos | **RF-063** | Al cancelar un pedido o registrar un reembolso, el sistema debe avisar al cliente por correo, crear notificaciones en la plataforma y dejar trazabilidad del movimiento negativo en las transacciones. | **RN-063** | Las cancelaciones envían un correo con detalle del pedido, plazos del reembolso y crean una notificación informando el motivo. Los reembolsos generan un registro negativo en payment_transactions con la referencia correspondiente y disparan notificaciones de estado y de pago. | **RI-063** | Datos de la orden afectada, listado de productos, correo del cliente, monto devuelto, referencia bancaria o del gateway, identificador del administrador, registro negativo en `payment_transactions`, historial de estado actualizado y notificaciones creadas (tipo, mensaje, fecha). |

<!-- NEXT_SECTION -->

## Parte 4: Descuentos y Búsqueda

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Códigos de Descuento** | Crear código de descuento | **RF-064** | El sistema debe permitir a los administradores crear códigos de descuento personalizados con tipo (porcentaje, monto fijo, envío gratis), valor, vigencia y límite de usos. | **RN-064** | Los códigos de descuento deben tener fecha de inicio y fin. Puedes configurar cuántas veces se puede usar en total y si es de un solo uso por cliente. Los códigos se pueden aplicar a todos los productos o solo a categorías/productos específicos. | **RI-064** | Prefijo común para los códigos, cantidad de códigos a generar (1-1000), numeración inicial, tipo de descuento, valor, fecha de vigencia, límite de usos, estado inicial y resultado de la generación (códigos creados exitosamente). |
| | Gestión de códigos | **RF-065** | El sistema debe permitir copiar el código al portapapeles, descargar un PDF con los detalles y realizar acciones masivas (activar, desactivar, eliminar). | **RN-065** | La copia del código es inmediata para facilitar su uso. El PDF generado incluye todos los códigos seleccionados con sus condiciones. Las acciones masivas requieren confirmación de seguridad antes de ejecutarse. | **RI-065** | Código copiado al portapapeles, archivo PDF generado para descarga, identificadores de los códigos afectados por acciones masivas y confirmación de la acción realizada. |
| | Asignar código a usuario | **RF-066** | El sistema debe permitir asignar un código de descuento específico a un usuario para que solo él pueda usarlo. | **RN-066** | Si asignas un código a un cliente específico (por correo), nadie más podrá usarlo. Esto es útil para compensaciones o premios personales. | **RI-066** | Código de descuento, correo electrónico del usuario beneficiario y fecha de asignación. |
| | Historial de uso | **RF-067** | El sistema debe registrar y mostrar cada vez que se utiliza un código de descuento en una compra. | **RN-067** | Puedes ver quién usó cada código, en qué orden y cuánto se ahorró. Esto permite medir el éxito de tus campañas de descuento. | **RI-067** | Código utilizado, número de orden, usuario que lo usó, monto descontado y fecha de uso. |
| | Buscar y filtrar códigos | **RF-068** | El sistema debe permitir buscar códigos por nombre y filtrar por estado (activo, inactivo, expirado) o tipo de descuento. | **RN-068** | La búsqueda es en tiempo real y permite encontrar rápidamente códigos específicos dentro de un listado grande. Los filtros ayudan a gestionar el ciclo de vida de las promociones. | **RI-068** | Criterio de búsqueda (texto), filtros aplicados (estado, tipo), listado de resultados filtrados y contadores de resultados. |
| **Descuentos por Volumen** | Configurar reglas de volumen | **RF-069** | El sistema debe permitir configurar descuentos automáticos al comprar ciertas cantidades de un producto (ej: "Lleva 3 y paga 2"). | **RN-069** | Estos descuentos se aplican automáticamente en el carrito sin necesidad de código. Puedes configurar reglas como "10% de descuento si compras 5 o más unidades". | **RI-069** | Producto o categoría aplica, cantidad mínima requerida, tipo de beneficio (descuento % o unidades gratis) y fechas de vigencia. |
| | Visualización de oferta | **RF-070** | El sistema debe mostrar claramente en la ficha del producto si existe un descuento por volumen disponible. | **RN-070** | El cliente debe ver una tabla o mensaje que diga "Compra X unidades y ahorra Y%" para incentivar la compra de mayor volumen. | **RI-070** | Tabla de precios escalonados (cantidad vs precio unitario) y mensaje promocional destacado. |
| **Búsqueda Inteligente** | Buscar productos | **RF-071** | El sistema debe permitir a los usuarios buscar productos por nombre, categoría o etiqueta desde una barra de búsqueda siempre visible. | **RN-071** | La búsqueda debe ser predictiva: empieza a mostrar resultados mientras escribes (a partir de 3 caracteres). Debe ignorar mayúsculas/minúsculas y acentos para facilitar la búsqueda. | **RI-071** | Término de búsqueda ingresado, sugerencias automáticas mostradas y listado de productos coincidentes con imagen y precio. |
| | Historial de búsqueda | **RF-072** | El sistema debe guardar un historial de las búsquedas realizadas por los usuarios para análisis y sugerencias. | **RN-072** | Guardamos qué buscan los clientes para saber qué productos son los más demandados o qué palabras usan para encontrarlos. Esto ayuda a mejorar los títulos y etiquetas de los productos. | **RI-072** | Término buscado, fecha y hora, usuario (si está registrado) o IP anónima y cantidad de resultados encontrados. |
| | Búsquedas populares | **RF-073** | El sistema debe mostrar las "Búsquedas populares" o tendencias cuando el usuario hace clic en la barra de búsqueda. | **RN-073** | Antes de escribir nada, sugerimos lo que más está buscando la gente en este momento (ej: "Zapatos", "Ofertas"). Esto guía al usuario hacia productos de interés general. | **RI-073** | Lista de los 5 términos más buscados en los últimos 7 días. |
| | Sin resultados | **RF-074** | El sistema debe mostrar una página amigable de "No se encontraron resultados" con sugerencias de productos cuando una búsqueda no tiene éxito. | **RN-074** | Si no encontramos lo que buscas, no te dejamos en una página vacía. Te mostramos productos recomendados o las categorías más visitadas para que sigas navegando. | **RI-074** | Mensaje de "Sin resultados", término buscado y lista de productos recomendados por defecto. |
| **Filtros de Productos** | Filtrar por precio | **RF-075** | El sistema debe permitir filtrar los listados de productos por rango de precios (mínimo y máximo). | **RN-075** | El usuario puede ajustar un deslizador o ingresar valores para ver solo productos dentro de su presupuesto. | **RI-075** | Rango de precios seleccionado (min-max) y productos filtrados que cumplen la condición. |
| | Filtrar por atributos | **RF-076** | El sistema debe permitir filtrar por atributos como color, talla y categoría. | **RN-076** | Los filtros son acumulativos (ej: "Zapatos" + "Rojos" + "Talla 40"). Solo se muestran las opciones de filtro que tienen productos disponibles (si no hay zapatos rojos, no aparece la opción "Rojo"). | **RI-076** | Atributos seleccionados y contador de productos disponibles para cada filtro. |
| | Ordenar resultados | **RF-077** | El sistema debe permitir ordenar los resultados de búsqueda y listados por precio (menor a mayor), novedad (más recientes) y popularidad (más vendidos). | **RN-077** | El orden predeterminado es "Más recientes" para mostrar siempre lo nuevo. El usuario puede cambiarlo según su preferencia de compra. | **RI-077** | Criterio de ordenamiento seleccionado y listado de productos reordenado según ese criterio. |

<!-- NEXT_SECTION -->

## Parte 5: Contenido y Configuración

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Colecciones** | Crear colección | **RF-078** | El sistema debe permitir crear colecciones de productos agrupados por criterios manuales o automáticos. | **RN-078** | Las colecciones agrupan productos para campañas específicas (ej: "Día de la Madre", "Liquidación"). Pueden tener una imagen de portada y descripción propia. | **RI-078** | Nombre de la colección, descripción, imagen de portada, criterio de agrupación (manual/automático) y estado. |
| | Asignar productos | **RF-079** | El sistema debe permitir asignar productos a una colección manualmente o definir reglas para inclusión automática. | **RN-079** | Puedes seleccionar productos uno a uno o decir "Todos los productos con precio menor a $50". Las reglas automáticas facilitan el mantenimiento de las colecciones. | **RI-079** | Lista de productos asignados o reglas de asignación configuradas (ej: categoría=Zapatos AND precio<50). |
| | Visualizar colección | **RF-080** | El sistema debe generar una página pública para cada colección activa mostrando sus productos. | **RN-080** | Cada colección tiene su propia URL única para compartir en redes sociales o campañas de email marketing. | **RI-080** | URL pública de la colección, listado de productos incluidos y elementos visuales de la colección. |
| **Noticias/Blog** | Publicar noticia | **RF-081** | El sistema debe permitir crear y publicar artículos de noticias o blog con título, contenido, imagen y autor. | **RN-081** | El blog ayuda a atraer tráfico a la tienda. Los artículos pueden tener formato rico (negritas, enlaces, imágenes) y se pueden programar para publicación futura. | **RI-081** | Título del artículo, contenido HTML, imagen destacada, autor, fecha de publicación y etiquetas. |
| | Listar noticias | **RF-082** | El sistema debe mostrar un listado de las últimas noticias publicadas en una sección dedicada del sitio. | **RN-082** | Las noticias se ordenan cronológicamente (la más nueva primero). Se muestra un resumen corto para invitar a leer más. | **RI-082** | Listado de artículos con: imagen, título, resumen, fecha y enlace "Leer más". |
| | Comentarios en noticias | **RF-083** | El sistema debe permitir a los usuarios registrados comentar en los artículos de noticias (sujeto a moderación). | **RN-083** | Los comentarios fomentan la comunidad. Todos los comentarios deben ser aprobados por un administrador antes de aparecer públicamente para evitar spam u ofensas. | **RI-083** | Texto del comentario, usuario autor, fecha, estado de moderación (pendiente/aprobado) y artículo asociado. |
| **Sliders** | Gestión de sliders | **RF-084** | El sistema debe permitir administrar los banners rotativos (sliders) de la página de inicio. | **RN-084** | Los sliders son lo primero que ve el cliente. Deben tener imágenes de alta calidad y enlaces a secciones importantes (ofertas, colecciones nuevas). Puedes programar cuándo aparecen y desaparecen. | **RI-084** | Imagen del banner (versión escritorio y móvil), título, subtítulo, texto del botón, enlace de destino, orden de aparición y fechas de vigencia. |
| | Visualización de sliders | **RF-085** | El sistema debe mostrar los sliders activos en la página de inicio con transición automática y controles de navegación. | **RN-085** | La rotación es automática cada 5 segundos, pero el usuario puede pausarla o cambiar de banner manualmente. Debe ser totalmente responsivo (adaptarse a móviles). | **RI-085** | Conjunto de banners activos ordenados y configuración de tiempo de transición. |
| **Configuración Envíos** | Configurar zonas de envío | **RF-086** | El sistema debe permitir definir zonas geográficas de envío y asignarles costos y tiempos de entrega específicos. | **RN-086** | Puedes cobrar diferente según la ciudad o región. Ej: "Bogotá: $5.000", "Resto del país: $10.000". También puedes definir zonas sin cobertura. | **RI-086** | Nombre de la zona, ciudades/regiones incluidas, costo de envío base y tiempo estimado de entrega. |
| | Reglas de envío gratis | **RF-087** | El sistema debe permitir configurar un monto mínimo de compra para activar el envío gratuito automáticamente. | **RN-087** | Incentiva compras mayores ofreciendo envío gratis por compras superiores a cierto valor (ej: $150.000). El sistema avisa al usuario cuánto le falta para obtener el beneficio. | **RI-087** | Monto mínimo para envío gratis, zonas donde aplica y mensaje promocional a mostrar en el carrito. |
| **Configuración Pagos** | Gestión de métodos de pago | **RF-088** | El sistema debe permitir activar o desactivar métodos de pago y configurar sus credenciales (API keys, cuentas bancarias). | **RN-088** | Puedes encender o apagar pasarelas de pago (Wompi, PayU) o métodos manuales (Transferencia) según necesites sin tocar código. | **RI-088** | Nombre del método, estado (activo/inactivo), credenciales de configuración (seguras), instrucciones para el usuario y orden de visualización. |
| | Configuración de impuestos | **RF-089** | El sistema debe permitir configurar el porcentaje de impuesto aplicable a los productos. | **RN-089** | El IVA u otros impuestos se calculan automáticamente sobre el precio base. Puedes definir si los precios ingresados ya incluyen impuesto o si se suma al final. | **RI-089** | Nombre del impuesto (ej: IVA), porcentaje (%), y regla de aplicación (incluido/excluido). |
| **Lista de Deseos** | Agregar a favoritos | **RF-090** | El sistema debe permitir a los usuarios autenticados agregar productos a su lista de deseos (favoritos). | **RN-090** | Permite guardar productos para comprar después. Solo disponible para usuarios registrados. El botón de "corazón" cambia de estado para indicar si ya está guardado. | **RI-090** | Usuario, producto agregado y fecha de agregado. |
| | Ver lista de deseos | **RF-091** | El sistema debe permitir a los usuarios ver y gestionar su lista de productos favoritos. | **RN-091** | Desde su perfil, el usuario ve todos sus favoritos y puede pasarlos directamente al carrito de compras o eliminarlos de la lista. | **RI-091** | Listado de productos favoritos con: imagen, nombre, precio actual, disponibilidad de stock y acciones (agregar al carrito, eliminar). |
| **Preguntas y Respuestas** | Realizar pregunta | **RF-092** | El sistema debe permitir a los usuarios hacer preguntas públicas sobre los productos en su ficha técnica. | **RN-092** | Las preguntas ayudan a aclarar dudas. El usuario recibe una notificación por correo cuando su pregunta es respondida. | **RI-092** | Texto de la pregunta, producto asociado, usuario (o correo si es invitado) y fecha. |
| | Responder preguntas | **RF-093** | El sistema debe permitir a los administradores responder las preguntas de los usuarios y publicarlas en la ficha del producto. | **RN-093** | Las respuestas oficiales generan confianza. Al responder, la pregunta y la respuesta se vuelven visibles para todos los visitantes del producto. | **RI-093** | Texto de la respuesta, administrador que responde, fecha de respuesta y estado de publicación. |
| **Reseñas Productos** | Ver reseñas de producto | **RF-094** | El sistema debe permitir visualizar las reseñas y calificaciones de cada producto con estadísticas, promedio y distribución de estrellas. | **RN-094** | Las reseñas se muestran con estadísticas completas: calificación promedio (1-5 estrellas), total de reseñas y gráfico de distribución. Las reseñas de compras verificadas aparecen primero. Se muestran máximo 10 reseñas por página ordenadas por fecha (más recientes primero) o por utilidad (más votadas primero). | **RI-094** | Estadísticas de reseñas: calificación promedio, total de reseñas, distribución por estrellas (cuántas de 5★, 4★, 3★, 2★, 1★). Listado de reseñas con: usuario, calificación, título, comentario, fecha, indicador de compra verificada y cantidad de votos útiles. |
| | Moderación de reseñas | **RF-095** | El sistema debe permitir a los administradores aprobar, rechazar y marcar reseñas como verificadas desde un panel de control centralizado. | **RN-095** | Todas las reseñas nuevas entran en estado “pendiente”. Solo las reseñas aprobadas son visibles públicamente. La marca de “verificada” confirma que el usuario realmente compró el producto reseñado. | **RI-095** | Estado de la reseña (pendiente/aprobada/rechazada), indicador de compra verificada, usuario administrador que modera, fecha de moderación y motivo de rechazo (si aplica). |

<!-- NEXT_SECTION -->

## Parte 6: Reportes y Administración

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Reportes y Estadísticas** | Reporte de ventas | **RF-096** | El sistema debe generar reportes detallados de ventas filtrables por fecha, producto, categoría y cliente. | **RN-096** | Los reportes permiten analizar el rendimiento del negocio. Deben incluir totales de ventas brutas, descuentos aplicados, costos de envío y ventas netas. | **RI-096** | Rango de fechas, desglose de ventas diarias/mensuales, productos más vendidos y total de ingresos. |
| | Reporte de inventario | **RF-097** | El sistema debe generar un reporte del estado actual del inventario, valorizado y con alertas de stock bajo. | **RN-097** | Permite conocer el valor total de la mercancía almacenada y planificar compras. El reporte debe resaltar los productos que necesitan reabastecimiento urgente. | **RI-097** | Lista de productos con stock actual, costo unitario, valor total del inventario y productos bajo el mínimo. |
| | Reporte de clientes | **RF-098** | El sistema debe generar reportes sobre el comportamiento de los clientes: nuevos registros, mejores compradores y carritos abandonados. | **RN-098** | Identifica a los clientes VIP y oportunidades de recuperación de ventas. Ayuda a segmentar para campañas de marketing. | **RI-098** | Lista de clientes con total comprado, fecha de última compra y listado de carritos abandonados con contacto. |
| | Gráficos de tendencias | **RF-099** | El sistema debe mostrar gráficos visuales (barras, líneas, torta) para representar las tendencias de ventas y productos. | **RN-099** | La información visual facilita la toma de decisiones rápida. Los gráficos deben ser interactivos y permitir cambiar el periodo de tiempo analizado. | **RI-099** | Datos visuales de ventas vs tiempo, distribución de ventas por categoría y métodos de pago más usados. |
| **Panel Administrativo** | Dashboard principal | **RF-100** | El sistema debe mostrar un tablero de control (dashboard) con los indicadores clave de rendimiento (KPIs) del día y del mes. | **RN-100** | Es la primera pantalla que ve el administrador. Debe mostrar de un vistazo: Ventas de hoy, Órdenes pendientes, Nuevos clientes y Productos agotados. | **RI-100** | Contadores en tiempo real de: ventas, órdenes, clientes y alertas críticas. |
| | Gestión de administradores | **RF-101** | El sistema debe permitir crear y gestionar cuentas de administradores con diferentes niveles de permisos. | **RN-101** | No todos los empleados deben tener acceso a todo. Puedes crear roles como "Vendedor" (solo pedidos), "Editor" (solo productos) o "Super Admin" (todo). | **RI-101** | Nombre, correo, rol asignado, fecha de creación y estado de la cuenta. |
| | Registro de actividad (Logs) | **RF-102** | El sistema debe registrar todas las acciones críticas realizadas por los administradores para seguridad y auditoría. | **RN-102** | Cada vez que alguien borra un producto, cambia un precio o cancela una orden, queda registrado quién fue y cuándo. Esto es vital para la seguridad interna. | **RI-102** | Usuario, acción realizada, entidad afectada, dirección IP y fecha/hora. |
| **Exportación de Datos** | Exportar órdenes | **RF-103** | El sistema debe permitir exportar el listado de órdenes a formato PDF para impresión o archivo. | **RN-103** | Facilita la gestión física de los pedidos. El PDF puede incluir una lista de empaque para el almacén. | **RI-103** | Archivo PDF con listado de órdenes seleccionadas y sus detalles clave. |
| | Exportar productos | **RF-104** | El sistema debe permitir exportar el catálogo de productos a formato CSV (Excel) para actualizaciones masivas o copias de seguridad. | **RN-104** | Permite trabajar los datos en Excel y luego volver a importarlos (si se implementa importación). Es útil para inventarios físicos. | **RI-104** | Archivo CSV con todas las columnas de datos de los productos. |
| | Exportar clientes | **RF-105** | El sistema debe permitir exportar la base de datos de clientes a formato Excel para uso en herramientas de marketing externas. | **RN-105** | Los datos de clientes son un activo valioso. La exportación debe cumplir con las normas de protección de datos (solo datos autorizados). | **RI-105** | Archivo Excel con nombres, correos y teléfonos de clientes que aceptaron recibir comunicaciones. |

<!-- NEXT_SECTION -->

## Parte 7: Comunicaciones y Experiencia

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Comunicaciones** | Anuncios comerciales | **RF-106** | El sistema debe permitir crear y mostrar anuncios comerciales (banners de texto) en la parte superior del sitio. | **RN-106** | Útil para avisos rápidos como "Envíos gratis hoy" o "Cierre por vacaciones". Puede configurarse el color de fondo y texto para llamar la atención. | **RI-106** | Texto del anuncio, enlace opcional, color de fondo, color de texto, fecha de inicio y fin. |
| | Centro de notificaciones | **RF-107** | El sistema debe contar con un centro de notificaciones para el usuario donde se agrupen avisos de pedidos, respuestas y promociones. | **RN-107** | Evita que el usuario se pierda información importante si no revisa su correo. El ícono de campana muestra un contador de no leídos. | **RI-107** | Lista de notificaciones con: título, mensaje, fecha, estado de lectura y enlace a la acción. |
| **Experiencia de Usuario** | Recomendaciones | **RF-108** | El sistema debe mostrar recomendaciones de productos ("También te podría gustar") basadas en el producto que se está viendo. | **RN-108** | Aumenta el ticket promedio sugiriendo complementos. Si ves "Zapatos", te sugerimos "Medias" o "Betún". La relación puede ser manual o por misma categoría. | **RI-108** | Lista de productos relacionados visualmente atractiva al final de la ficha de producto. |
| | Cancelación autogestionada | **RF-109** | El sistema debe permitir a los usuarios cancelar sus propios pedidos si estos aún no han sido procesados (estado "Pendiente"). | **RN-109** | Reduce la carga operativa de atención al cliente. Solo se permite cancelar si el pedido no ha pasado a "En preparación". El reembolso (si aplica) queda pendiente de gestión manual. | **RI-109** | Motivo de cancelación seleccionado por el usuario y cambio de estado de la orden a "Cancelado por usuario". |
| | Asistente de direcciones | **RF-110** | El sistema debe integrar un asistente de autocompletado y validación de direcciones usando una API de mapas. | **RN-110** | Reduce errores en la entrega. Al escribir la dirección, el sistema sugiere ubicaciones reales y permite confirmar el punto exacto en el mapa. | **RI-110** | Sugerencias de dirección en tiempo real y coordenadas precisas seleccionadas. |

<!-- NEXT_SECTION -->

## Parte 8: Equipo y Diagnóstico

| Módulo | Subproceso | RF | Requisito Funcional | RN | Reglas de Negocio | RI | Requisitos de Información |
|---|---|---|---|---|---|---|---|
| **Equipo y Diagnóstico** | Gestión de Equipo | **RF-111** | El sistema debe permitir gestionar perfiles de miembros del equipo con roles específicos (Administrador, Soporte, Marketing). | **RN-111** | Permite delegar funciones sin dar acceso total. Cada miembro tiene su propio login y permisos limitados según su rol. | **RI-111** | Nombre, correo, rol, fecha de ingreso y estado (activo/inactivo). |
| | Diagnóstico Técnico | **RF-112** | El sistema debe incluir una herramienta de autodiagnóstico que verifique el estado del servidor, base de datos y librerías necesarias. | **RN-112** | Ayuda a detectar problemas técnicos rápidamente antes de que afecten a los clientes. Verifica versiones de PHP, extensiones y conexión a BD. | **RI-112** | Estado de servicios (OK/Error), versión de PHP, memoria disponible y lista de extensiones instaladas. |
| | Automatización Postventa | **RF-113** | El sistema debe ejecutar tareas automáticas de seguimiento postventa, como correos de agradecimiento o encuestas de satisfacción. | **RN-113** | Mejora la fidelización del cliente sin esfuerzo manual. Se programa para enviarse X días después de la entrega. | **RI-113** | Reglas de automatización configuradas, historial de envíos automáticos y tasas de apertura/respuesta. |
| | Productividad | **RF-114** | El sistema debe ofrecer herramientas de productividad para el administrador, como notas rápidas, calendario de tareas y recordatorios. | **RN-114** | Centraliza la gestión del negocio en un solo lugar. Permite al administrador organizar su día sin salir de la plataforma. | **RI-114** | Notas guardadas, eventos en calendario y lista de tareas pendientes. |

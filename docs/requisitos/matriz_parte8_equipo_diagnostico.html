<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matriz de Requisitos - Parte 8: Equipo y Diagnóstico</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .info-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 3px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .info-item { display: flex; align-items: center; gap: 8px; }
        .info-item strong { color: #667eea; }
        .table-container { padding: 30px; overflow-x: auto; }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        thead th {
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85em;
            letter-spacing: 0.5px;
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            vertical-align: middle;
        }
        thead th:last-child { border-right: none; }
        tbody tr {
            border-bottom: 1px solid #e0e0e0;
            transition: background-color 0.3s;
        }
        tbody tr:hover { background-color: #f5f5f5; }
        tbody tr:nth-child(even) { background-color: #fafafa; }
        tbody tr:nth-child(even):hover { background-color: #f0f0f0; }
        td {
            padding: 14px 12px;
            vertical-align: top;
            border-right: 1px solid #e8e8e8;
            word-wrap: break-word;
        }
        td:last-child { border-right: none; }
        .module-cell {
            font-weight: 600;
            color: #667eea;
            background-color: #f0f4ff !important;
            border-left: 4px solid #667eea;
        }
        .subprocess-cell { font-weight: 500; color: #555; }
        .code-cell {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #764ba2;
            background-color: #faf5ff;
        }
        .description-cell { color: #333; line-height: 1.5; }
        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 3px solid #667eea;
            text-align: center;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>MATRIZ DE REQUISITOS - PARTE 8</h1>
            <p>Gestión del Equipo y Diagnóstico Técnico - Sistema Angelow</p>
        </div>
        <div class="info-bar">
            <div class="info-item"><strong>Módulos:</strong> Gestión de Administradores, Productividad del Dashboard, Diagnóstico Técnico, Automatización Postventa</div>
            <div class="info-item"><strong>Fecha:</strong> Noviembre 2025</div>
            <div class="info-item"><strong>Requisitos:</strong> RF-127 a RF-136</div>
        </div>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 10%;">Módulo</th>
                        <th style="width: 10%;">Subproceso</th>
                        <th style="width: 5%;">Nro.<br>RF</th>
                        <th style="width: 25%;">Requisito Funcional</th>
                        <th style="width: 5%;">Nro.<br>RN</th>
                        <th style="width: 20%;">Reglas del Negocio</th>
                        <th style="width: 5%;">Nro.<br>RI</th>
                        <th style="width: 20%;">Requisitos de Información</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- GESTIÓN DE ADMINISTRADORES -->
                    <tr>
                        <td class="module-cell" rowspan="4">Gestión de Administradores</td>
                        <td class="subprocess-cell">Registrar administrador</td>
                        <td class="code-cell">RF-127</td>
                        <td class="description-cell">
                            El panel debe permitir crear cuentas administrativas ingresando nombre, correo corporativo, contraseña temporal y rol, para delegar tareas sin exponer usuarios personales.
                        </td>
                        <td class="code-cell">RN-127</td>
                        <td class="description-cell">Solo los administradores autenticados pueden crear nuevos perfiles. El correo debe ser único y la contraseña se almacena en forma cifrada. Tras guardar se redirige automáticamente al listado general.</td>
                        <td class="code-cell">RI-127</td>
                        <td class="description-cell">
                            Datos almacenados: nombre, correo, contraseña cifrada, rol asignado, fecha de creación, usuario que realizó el alta y estado inicial (activo).
                        </td>
                    </tr>
                    <tr>
                        <td class="subprocess-cell">Listar equipo administrativo</td>
                        <td class="code-cell">RF-128</td>
                        <td class="description-cell">
                            Debe mostrarse una tabla dinámica con todos los administradores, indicando nombre, correo, rol, estado (activo/bloqueado) y un resumen estadístico del equipo.
                        </td>
                        <td class="code-cell">RN-128</td>
                        <td class="description-cell">La tabla se alimenta automáticamente, ordena por último acceso y ofrece filtros por estado. Incluye contadores de totales, activos, bloqueados y últimos ingresos de la semana.</td>
                        <td class="code-cell">RI-128</td>
                        <td class="description-cell">
                            Por cada registro: id, nombre, correo, teléfono, avatar, rol, estado bloqueado, fecha de creación y fecha del último acceso; además, métricas agregadas para las tarjetas de resumen.
                        </td>
                    </tr>
                    <tr>
                        <td class="subprocess-cell">Bloquear o reactivar</td>
                        <td class="code-cell">RF-129</td>
                        <td class="description-cell">
                            Desde la tabla el supervisor debe poder bloquear o reactivar administradores con un clic para controlar accesos de manera inmediata.
                        </td>
                        <td class="code-cell">RN-129</td>
                        <td class="description-cell">Cada botón solicita confirmación y ejecuta la acción solicitada de inmediato. Solo se permiten acciones sobre cuentas con rol admin; el servicio verifica existencia y responde con el estado actualizado.</td>
                        <td class="code-cell">RI-129</td>
                        <td class="description-cell">
                            Parámetros: identificador del usuario, acción solicitada (block/unblock), usuario que ejecuta, sello de tiempo y respuesta con el registro completo para refrescar la fila en pantalla.
                        </td>
                    </tr>
                    <tr>
                        <td class="subprocess-cell">Editar perfil / reset clave</td>
                        <td class="code-cell">RF-130</td>
                        <td class="description-cell">
                            El sistema debe permitir editar datos de contacto del administrador y generar contraseñas temporales cuando sea necesario restaurar accesos seguros.
                        </td>
                        <td class="code-cell">RN-130</td>
                        <td class="description-cell">Se valida que el correo siga siendo único, el teléfono sea opcional y que la nueva contraseña temporal se genere aleatoriamente (10 caracteres alfanuméricos) y se muestre una sola vez al supervisor.</td>
                        <td class="code-cell">RI-130</td>
                        <td class="description-cell">
                            Información registrada: id del administrador, nombre, correo, teléfono, ruta de imagen, estado bloqueado, contraseña cifrada (si aplica) y bitácora de quién realizó la edición.
                        </td>
                    </tr>
                    <!-- PRODUCTIVIDAD DEL DASHBOARD -->
                    <tr>
                        <td class="module-cell" rowspan="2">Productividad en Dashboard</td>
                        <td class="subprocess-cell">Búsqueda global</td>
                        <td class="code-cell">RF-131</td>
                        <td class="description-cell">
                            El encabezado del panel debe ofrecer una búsqueda global que encuentre órdenes, productos, clientes y atajos de navegación con resultados instantáneos.
                        </td>
                        <td class="code-cell">RN-131</td>
                        <td class="description-cell">La búsqueda requiere mínimo dos caracteres, limita la respuesta a 5 resultados por categoría y solo está disponible para usuarios con rol admin. Cada resultado muestra título, detalle y enlace directo a la sección correspondiente.</td>
                        <td class="code-cell">RI-131</td>
                        <td class="description-cell">
                            Respuesta organizada en cuatro grupos (órdenes, productos, clientes y atajos) con: id, título, subtítulo, enlace destino y categoría para resaltar iconos e interpretar teclas rápidas.
                        </td>
                    </tr>
                    <tr>
                        <td class="subprocess-cell">Acciones rápidas</td>
                        <td class="code-cell">RF-132</td>
                        <td class="description-cell">
                            El botón de acciones rápidas debe mostrar accesos directos configurables (nuevo producto, generar cupones, revisar pagos, etc.) para iniciar tareas frecuentes sin navegar por el menú completo.
                        </td>
                        <td class="code-cell">RN-132</td>
                        <td class="description-cell">Las acciones se definen en una configuración central, cada una con identificador, icono, descripción y ruta dentro del panel. La lista se usa también por la búsqueda global para mantener coherencia.</td>
                        <td class="code-cell">RI-132</td>
                        <td class="description-cell">
                            Configuración por acción: identificador, etiqueta, descripción, icono predefinido, ruta relativa, palabras clave para búsqueda y categoría (acción o módulo) para ordenar la visualización.
                        </td>
                    </tr>
                    <!-- DIAGNÓSTICO TÉCNICO -->
                    <tr>
                        <td class="module-cell" rowspan="2">Diagnóstico Técnico</td>
                        <td class="subprocess-cell">Diagnóstico de exportación PDF</td>
                        <td class="code-cell">RF-133</td>
                        <td class="description-cell">
                            El panel debe incluir una página de diagnóstico que verifique versión de PHP, dependencias Composer, sesión activa, conexión a base de datos, permisos de carpetas y disponibilidad de librerías TCPDF/Dompdf.
                        </td>
                        <td class="code-cell">RN-133</td>
                        <td class="description-cell">Si falta la instalación de bibliotecas se muestra la instrucción para completarla desde consola. También se prueba la generación real de PDFs con las dos librerías y se registran advertencias cuando el servidor carece de extensiones necesarias.</td>
                        <td class="code-cell">RI-133</td>
                        <td class="description-cell">
                            Reporte con: versión de PHP, existencia de archivos clave, estado de extensiones, datos de sesión, conteo de órdenes en la base de datos, rutas de logotipos, permisos de carpetas temporales y resultado de pruebas de PDF.
                        </td>
                    </tr>
                    <tr>
                        <td class="subprocess-cell">Inspección de tablas</td>
                        <td class="code-cell">RF-134</td>
                        <td class="description-cell">
                            Debe existir una herramienta que liste todas las tablas de la base de datos con su cantidad de registros y muestre detalles de aquellas relacionadas con productos y pedidos para diagnósticos rápidos.
                        </td>
                        <td class="code-cell">RN-134</td>
                        <td class="description-cell">El informe resalta tablas relacionadas con productos y pedidos, describe los campos principales de los artículos vendidos y presenta un ejemplo de registro. Si falta alguna tabla clave se marca en rojo para facilitar la corrección.</td>
                        <td class="code-cell">RI-134</td>
                        <td class="description-cell">
                            Información presentada: nombre de la tabla, número de filas, lista resumida de columnas, ejemplo de datos (cuando aplica) y mensajes de éxito/alerta para guiar al personal técnico.
                        </td>
                    </tr>
                    <!-- AUTOMATIZACIÓN POSTVENTA -->
                    <tr>
                        <td class="module-cell" rowspan="2">Automatización Postventa</td>
                        <td class="subprocess-cell">Notificar entrega con factura</td>
                        <td class="code-cell">RF-135</td>
                        <td class="description-cell">
                            Cuando una orden pasa a "entregada" el sistema debe generar el PDF de la factura, enviarlo por correo y registrar una notificación interna para el cliente sin intervención manual.
                        </td>
                        <td class="code-cell">RN-135</td>
                        <td class="description-cell">El proceso arma el paquete completo (datos de cliente, productos, envío), genera el PDF con la plantilla disponible, envía el correo con la factura adjunta y luego crea un registro en el centro de notificaciones ligado a la orden.</td>
                        <td class="code-cell">RI-135</td>
                        <td class="description-cell">
                            Información enviada: datos de la orden (cliente, contacto, dirección, método de pago), listado de ítems con imágenes, nombre del archivo PDF, correo destinatario, estado del envío y notificación creada (título, mensaje, referencia del pedido).
                        </td>
                    </tr>
                    <tr>
                        <td class="subprocess-cell">Gestionar cancelaciones y reembolsos</td>
                        <td class="code-cell">RF-136</td>
                        <td class="description-cell">
                            Al cancelar o reembolsar pedidos, el sistema debe crear notificaciones, enviar correos y registrar el movimiento negativo en el historial de pagos para dejar trazabilidad completa.
                        </td>
                        <td class="code-cell">RN-136</td>
                        <td class="description-cell">Los procesos de cancelación y reembolso validan que la orden exista, actualizan estados de pago a "reembolsado", crean entradas en el historial de estado, generan correos personalizados y, si no existía, registran un movimiento financiero negativo como evidencia.</td>
                        <td class="code-cell">RI-136</td>
                        <td class="description-cell">
                            Datos capturados: id de la orden, usuario afectado, monto reembolsado, referencia del pago, pasarela (si aplica), id del administrador, notificación enviada, correo disparado y movimiento financiero negativo con nota de auditoría.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="footer">
            <p><strong>Proyecto Angelow - Parte 8 de 8</strong></p>
            <p>Gestión del Equipo y Diagnóstico | Requisitos: RF-127 a RF-136</p>
                <p style="margin-top: 10px; font-size: 0.9em; color: #28a745;">
                <strong>Total general documentado: 136 RF | 136 RN | 136 RI</strong>
            </p>
            <p style="margin-top: 5px; font-size: 0.85em; color: #666;">
                Módulos: Gestión de Administradores, Productividad en Dashboard, Diagnóstico Técnico y Automatización Postventa.
            </p>
        </div>
    </div>
</body>
</html>

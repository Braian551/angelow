# Matriz de Requisitos Completa - PARTE 3 de 3
## Marketing, Administración, Configuración y Diagnóstico (RF-111 a RF-169)

| Módulo | Subprocesos | Nro. | Descripción (RF) | Nro. | Descripción (RN) | Nro. | Descripción (RI) |
|---|---|---|---|---|---|---|---|
| Marketing y Contenido | Crear código de descuento | RF-111 | El sistema debe permitir a los administradores crear códigos de descuento personalizados con tipo (porcentaje, monto fijo, envío gratis), valor, vigencia y límite de usos. | RN-111 | Los códigos de descuento deben tener fecha de inicio y fin. Puedes configurar cuántas veces se puede usar en total y si es de un solo uso por cliente. Los códigos se pueden aplicar a todos los productos o solo a categorías/productos específicos. | RI-111 | Código único alfanumérico, tipo de descuento (porcentaje/monto fijo/envío gratis), valor del descuento, fecha de inicio de vigencia, fecha de fin de vigencia, límite total de usos, indicador de un solo uso por cliente, productos o categorías aplicables y estado activo/inactivo. |
| Marketing y Contenido | Mostrar códigos de descuento | RF-112 | El sistema debe permitir visualizar el listado completo de códigos de descuento con su información, usos restantes y estado de vigencia. | RN-112 | El listado muestra todos los códigos: activos, próximos a vencer (en los próximos 7 días con alerta amarilla), vencidos y agotados. Puedes ver cuántas veces se ha usado cada código y cuántos usos quedan disponibles. | RI-112 | Listado de códigos con: código, tipo de descuento, valor, fecha de inicio y fin de vigencia, total de usos permitidos, usos realizados, usos restantes, indicadores visuales (próximo a vencer, vencido, agotado) y opciones de acciones (editar, activar/desactivar, eliminar). |
| Marketing y Contenido | Generar códigos masivamente | RF-113 | El sistema debe permitir generar múltiples códigos de descuento únicos en una sola operación con un prefijo común y numeración automática. | RN-113 | Puedes generar hasta 1000 códigos a la vez con un formato como "VERANO2025-001", "VERANO2025-002", etc. Todos los códigos generados comparten el mismo tipo de descuento, valor, vigencia y límite de usos. Es útil para campañas masivas. | RI-113 | Prefijo común para los códigos, cantidad de códigos a generar (1-1000), numeración inicial, tipo de descuento, valor, fecha de vigencia, límite de usos, estado inicial y resultado de la generación (códigos creados exitosamente). |
| Marketing y Contenido | Asignar código a usuario | RF-114 | El sistema debe permitir asignar códigos de descuento personalizados a usuarios específicos, enviándoles automáticamente un correo con el código. | RN-114 | Cuando asignas un código personalizado a un cliente, este recibe automáticamente un correo profesional con el código destacado, explicación del beneficio, fecha de vencimiento, instrucciones de uso y botón directo para ir a la tienda. | RI-114 | Identificador del código de descuento, identificador del usuario destinatario, fecha de asignación, correo electrónico de notificación enviado (asunto, cuerpo, estado de envío) y fecha de expiración del código asignado. |
| Marketing y Contenido | Crear regla de descuento bulk | RF-115 | El sistema debe permitir crear reglas de descuento automático basadas en cantidad de productos comprados (por ejemplo: 10% al comprar 5 o más unidades). | RN-115 | Las reglas de descuento por cantidad se aplican automáticamente al carrito cuando se cumple el mínimo de productos. Puedes configurar rangos como "5-9 unidades: 10% descuento" y "10+ unidades: 15% descuento". No se combinan con códigos promocionales. | RI-115 | Cantidad mínima de productos, cantidad máxima (opcional para rango abierto), porcentaje de descuento a aplicar, categorías o productos aplicables, fechas de vigencia de la regla y estado activo/inactivo. |
| Marketing y Contenido | Mostrar reglas bulk | RF-116 | El sistema debe permitir visualizar todas las reglas de descuento por cantidad configuradas con su información de aplicabilidad y estado. | RN-116 | El listado muestra cada regla con su rango de cantidad, porcentaje de descuento, productos/categorías donde aplica, vigencia y estado. Las reglas activas se destacan y se muestran primero en el listado. | RI-116 | Listado de reglas con: rango de cantidad (mínimo-máximo), porcentaje de descuento, aplicabilidad (todos los productos, categoría específica, productos específicos), fecha de vigencia, estado activo/inactivo y opciones de editar/eliminar. |
| Marketing y Contenido | Aplicación automática en carrito | RF-117 | El sistema debe aplicar automáticamente el descuento por cantidad cuando el carrito cumple con las condiciones de alguna regla activa. | RN-117 | Cuando agregas suficientes productos al carrito para calificar a un descuento por cantidad, este se aplica automáticamente sin necesidad de código. Si calificas para varios descuentos (código + bulk), se aplica el que te genere mayor ahorro. | RI-117 | Cantidad total de productos en el carrito, reglas aplicables evaluadas, mejor descuento identificado, cálculo del descuento aplicado, nuevo subtotal con descuento y mensaje informativo al usuario sobre el descuento aplicado. |
| Marketing y Contenido | Crear colección | RF-118 | El sistema debe permitir a los administradores crear colecciones temáticas de productos con nombre, descripción, imagen destacada y fecha de lanzamiento. | RN-118 | Las colecciones son agrupaciones temáticas de productos para campañas de marketing (como "Verano 2025", "Línea Premium", "Vuelta al Cole"). Cada colección tiene URL amigable generada automáticamente. Un producto puede estar en varias colecciones simultáneamente. | RI-118 | Nombre de la colección, identificador de URL amigable (slug) generado automáticamente, descripción de la colección, imagen destacada (JPG/PNG máximo 2MB), fecha de lanzamiento, estado (activa/inactiva) y fecha de creación. |
| Marketing y Contenido | Mostrar colecciones | RF-119 | El sistema debe permitir visualizar el listado completo de colecciones con cantidad de productos asociados y estado de cada una. | RN-119 | El listado muestra todas las colecciones con su imagen, nombre, descripción resumida, fecha de lanzamiento, cantidad de productos asociados y estado. Puedes ver, editar o eliminar cada colección. Las colecciones activas aparecen en la tienda. | RI-119 | Listado de colecciones con: identificador, nombre, imagen miniatura, cantidad de productos asociados, fecha de lanzamiento, estado (activa/próximamente/inactiva) y opciones de acciones (editar, gestionar productos, eliminar). |
| Marketing y Contenido | Actualizar colección | RF-120 | El sistema debe permitir modificar cualquier información de colecciones existentes: nombre, descripción, imagen, fecha de lanzamiento o agregar/quitar productos. | RN-120 | Al editar una colección puedes cambiar su información básica y gestionar qué productos la integran. Los productos se agregan desde una lista donde puedes buscar y seleccionar múltiples productos a la vez. Los cambios se reflejan inmediatamente en la tienda. | RI-120 | Identificador de la colección, nuevos valores para: nombre, descripción, imagen, fecha de lanzamiento, estado, productos asociados (agregar/eliminar), usuario administrador que modifica y fecha de última actualización. |
| Marketing y Contenido | Eliminar colección | RF-121 | El sistema debe permitir eliminar colecciones que ya no se utilizan, liberando espacio y simplificando el catálogo. | RN-121 | Al eliminar una colección se borran solo las relaciones con productos, no los productos en sí. Los productos quedan disponibles normalmente en el catálogo. El sistema pedirá confirmación antes de eliminar. La eliminación queda registrada en auditoría. | RI-121 | Identificador de la colección a eliminar, cantidad de productos asociados, confirmación de eliminación, imagen eliminada, usuario administrador que elimina y fecha de eliminación para auditoría. |
| Marketing y Contenido | Crear noticia | RF-122 | El sistema debe permitir a los administradores crear artículos de noticias o blog con título, contenido, imagen destacada y fecha de publicación. | RN-122 | Las noticias pueden programarse para publicarse automáticamente en fecha futura. Puedes marcarlas como destacadas para aparecer en posición preferencial. El contenido admite formato enriquecido (negritas, cursivas, listas, enlaces). Cada noticia tiene URL amigable generada del título. | RI-122 | Título de la noticia, identificador de URL (slug) generado automáticamente, contenido completo en formato enriquecido, imagen destacada, fecha de publicación, indicador de noticia destacada, estado (publicada/borrador) y autor (administrador). |
| Marketing y Contenido | Mostrar noticias | RF-123 | El sistema debe permitir visualizar el listado completo de noticias publicadas ordenadas por fecha, con filtros por estado y búsqueda por título. | RN-123 | El listado muestra todas las noticias con imagen, título, extracto, fecha de publicación, autor, estado y indicador de destacada. Puedes filtrar por publicadas, borradores o todas. Las noticias destacadas aparecen con icono especial. | RI-123 | Listado de noticias con: imagen miniatura, título, extracto del contenido (primeros 150 caracteres), autor, fecha de publicación, estado (publicada/borrador), indicador de destacada y opciones de acciones (ver, editar, eliminar). |
| Marketing y Contenido | Actualizar noticia | RF-124 | El sistema debe permitir modificar cualquier información de noticias existentes: título, contenido, imagen, fecha de publicación, estado destacado. | RN-124 | Al editar una noticia puedes cambiar todo su contenido y configuración. Si cambias el título, la URL amigable se regenera automáticamente. Puedes convertir borradores en publicadas y viceversa. Los cambios son inmediatos en la sección de noticias de la tienda. | RI-124 | Identificador de la noticia, nuevos valores para: título, contenido, imagen, fecha de publicación, estado destacado, estado de publicación, usuario que modifica y fecha de última actualización. |
| Marketing y Contenido | Eliminar noticia | RF-125 | El sistema debe permitir eliminar noticias obsoletas o que contienen información incorrecta, con confirmación previa. | RN-125 | Al eliminar una noticia se borra completamente su contenido e imagen asociada. El sistema pedirá confirmación antes de eliminar. La eliminación queda registrada en auditoría con quién la eliminó y cuándo. | RI-125 | Identificador de la noticia a eliminar, título y fecha de publicación (para confirmación), imagen eliminada, usuario administrador que elimina, motivo de eliminación (opcional) y fecha de eliminación. |
| Marketing y Contenido | Crear slider | RF-126 | El sistema debe permitir crear banners deslizantes para la página principal con imagen, título, subtítulo, enlace de redirección y orden de visualización. | RN-126 | Los sliders son banners promocionales grandes que aparecen rotativamente en la página de inicio. Cada uno puede enlazar a una categoría, colección, producto o URL externa. El orden determina la secuencia de rotación. Las imágenes deben ser de alta calidad (1920x600px recomendado). | RI-126 | Título del banner, subtítulo descriptivo, imagen de fondo (JPG/PNG máximo 3MB), URL de redirección al hacer clic, orden de visualización numérico, estado (activo/inactivo) y fecha de creación. |
| Marketing y Contenido | Mostrar sliders | RF-127 | El sistema debe permitir visualizar el listado completo de sliders con su imagen, texto, enlace, orden y estado. | RN-127 | El listado muestra todos los sliders ordenados según su número de orden. Los activos se destacan visualmente. Puedes reordenarlos arrastrando, editar su contenido o activar/desactivar individualmente. Solo los sliders activos aparecen en la página principal. | RI-127 | Listado de sliders con: imagen miniatura, título, subtítulo, enlace de redirección, orden de visualización, estado (activo/inactivo), indicador de slider actualmente visible y opciones de acciones (ver preview, editar, cambiar orden, eliminar). |
| Marketing y Contenido | Actualizar slider | RF-128 | El sistema debe permitir modificar cualquier información de sliders existentes: imagen, títulos, enlace, orden o estado. | RN-128 | Al editar un slider puedes cambiar su imagen, textos, enlace de destino, orden de aparición y activarlo o desactivarlo. Los cambios son inmediatos en la página principal. Puedes previsualizar cómo se verá antes de guardar los cambios. | RI-128 | Identificador del slider, nuevos valores para: título, subtítulo, imagen, URL de redirección, orden, estado, usuario administrador que modifica y fecha de última actualización. |
| Marketing y Contenido | Eliminar slider | RF-129 | El sistema debe permitir eliminar sliders que ya no se utilizan en las campañas promocionales actuales. | RN-129 | Al eliminar un slider se borra su imagen y configuración completamente. El sistema reordena automáticamente los sliders restantes para evitar huecos en la numeración. Pedirá confirmación antes de eliminar permanentemente. | RI-129 | Identificador del slider a eliminar, imagen eliminada, orden liberado, reordenamiento automático de sliders restantes, usuario que elimina y fecha de eliminación. |
| Administración y Reportes | Gráficos de tendencias | RF-130 | El sistema debe mostrar gráficos interactivos de tendencias: ventas de últimos 30 días, productos más vendidos, categorías más populares y registros de clientes. | RN-130 | Los gráficos son interactivos: puedes pasar el cursor sobre puntos específicos para ver valores exactos. Los períodos se pueden ajustar (7 días, 30 días, 3 meses, año). Los gráficos se actualizan en tiempo real al seleccionar diferentes períodos de tiempo. | RI-130 | Datos para gráfico de líneas de ventas (fecha, monto), datos para gráfico de barras de productos más vendidos (producto, cantidad), datos para gráfico de torta de categorías (categoría, porcentaje) y datos de registro de clientes por período (fecha, cantidad). |
| Administración y Reportes | Búsqueda global | RF-131 | El encabezado del panel debe ofrecer una búsqueda global que encuentre órdenes, productos, clientes y atajos de navegación con resultados instantáneos. | RN-131 | La búsqueda requiere mínimo dos caracteres, limita la respuesta a 5 resultados por categoría y solo está disponible para usuarios con rol admin. Cada resultado muestra título, detalle y enlace directo a la sección correspondiente. | RI-131 | Respuesta organizada en cuatro grupos (órdenes, productos, clientes y atajos) con: id, título, subtítulo, enlace destino y categoría para resaltar iconos e interpretar teclas rápidas. |
| Administración y Reportes | Acciones rápidas | RF-132 | El botón de acciones rápidas debe mostrar accesos directos configurables (nuevo producto, generar cupones, revisar pagos, etc.) para iniciar tareas frecuentes sin navegar por el menú completo. | RN-132 | Las acciones se definen en una configuración central, cada una con identificador, icono, descripción y ruta dentro del panel. La lista se usa también por la búsqueda global para mantener coherencia. | RI-132 | Configuración por acción: identificador, etiqueta, descripción, icono predefinido, ruta relativa, palabras clave para búsqueda y categoría (acción o módulo) para ordenar la visualización. |
| Administración y Reportes | Informe de productos | RF-133 | El sistema debe generar informes de productos con: productos más vendidos, productos con stock bajo, productos sin ventas y valor total de inventario. | RN-133 | El informe de productos ayuda a tomar decisiones de inventario: identifica top 10 productos más vendidos, productos con stock crítico (bajo el umbral), productos que no se han vendido nunca, valor total del inventario y productos próximos a agotarse. Incluye gráficos de barras para visualización clara. | RI-133 | Top 10 productos más vendidos (nombre, cantidad vendida, ingresos generados), productos con stock crítico (nombre, stock actual, umbral), productos sin ventas, valor total del inventario (suma de precio×stock) y alertas de reabastecimiento. |
| Administración y Reportes | Informe de ventas | RF-134 | El sistema debe generar informes de ventas con: ingresos totales, cantidad de órdenes, ticket promedio, comparativa con período anterior y gráficos de tendencias. | RN-134 | El informe de ventas muestra la salud financiera del negocio: ingresos totales del período, cantidad de pedidos, ticket promedio (valor promedio por orden), comparativa con mes/año anterior (porcentaje de crecimiento), ingresos por día/semana/mes y gráfico de líneas de tendencia. | RI-134 | Ingresos totales del período, cantidad de órdenes completadas, ticket promedio, comparativa con período anterior (porcentaje de cambio), ingresos por día/semana/mes (gráfico), método de pago más usado y descuentos aplicados totales. |
| Administración y Reportes | Diagnóstico de exportación PDF | RF-135 | El panel debe incluir una página de diagnóstico que verifique versión de PHP, dependencias Composer, sesión activa, conexión a base de datos, permisos de carpetas y disponibilidad de librerías TCPDF/Dompdf. | RN-135 | Si falta la instalación de bibliotecas se muestra la instrucción para completarla desde consola. También se prueba la generación real de PDFs con las dos librerías y se registran advertencias cuando el servidor carece de extensiones necesarias. | RI-135 | Reporte con: versión de PHP, existencia de archivos clave, estado de extensiones, datos de sesión, conteo de órdenes en la base de datos, rutas de logotipos, permisos de carpetas temporales y resultado de pruebas de PDF. |
| Administración y Reportes | Inspección de tablas | RF-136 | Debe existir una herramienta que liste todas las tablas de la base de datos con su cantidad de registros y muestre detalles de aquellas relacionadas con productos y pedidos para diagnósticos rápidos. | RN-136 | El informe resalta tablas relacionadas con productos y pedidos, describe los campos principales de los artículos vendidos y presenta un ejemplo de registro. Si falta alguna tabla clave se marca en rojo para facilitar la corrección. | RI-136 | Información presentada: nombre de la tabla, número de filas, lista resumida de columnas, ejemplo de datos (cuando aplica) y mensajes de éxito/alerta para guiar al personal técnico. |
| Administración y Reportes | Bandeja de notificaciones | RF-137 | Los usuarios deben contar con una bandeja donde consulten hasta 50 notificaciones recientes con filtros por estado (todas, leídas, sin leer) y por tipo (pedidos, productos, promociones, sistema o cuenta). | RN-137 | Al ingresar se marcan automáticamente como leídas para evitar duplicar alertas. Cada tarjeta muestra icono contextual, título, mensaje, tiempo transcurrido y, cuando aplica, un enlace directo al pedido relacionado. | RI-137 | Notificación con: id, usuario, título, mensaje, tipo, entidad relacionada, fecha de creación, indicador leído/no leído, fecha de lectura y enlace opcional para abrir el detalle que generó la alerta. |
| Administración y Reportes | Contador en tiempo real | RF-138 | El encabezado del sitio debe mostrar un contador dinámico de notificaciones pendientes alimentado por consultas automáticas y actualizarlo periódicamente sin recargar la página. | RN-138 | El contador solo aparece para usuarios autenticados, toma en cuenta las preferencias del usuario y se actualiza cada pocos minutos o cuando el usuario elimina o lee una notificación. | RI-138 | Respuesta JSON con: identificador del usuario, cantidad total de notificaciones sin leer, hora de cálculo y bandera de éxito para manejar errores o sesiones caducadas en el front. |
| Administración y Reportes | Acciones sobre notificaciones | RF-139 | El usuario debe poder eliminar notificaciones individuales, marcar todas como leídas en un clic y disparar acciones según el tipo (por ejemplo, abrir el pedido en seguimiento) sin abandonar la página. | RN-139 | Cada acción se valida contra el usuario autenticado para evitar manipulaciones. Las operaciones muestran mensajes claros y actualizan de inmediato la bandeja y los contadores. | RI-139 | Parámetros: id de notificación, usuario propietario, acción solicitada (leer, eliminar, leer todas), fecha/hora aplicada y respuesta del sistema para refrescar los contadores y el listado en pantalla. |
| Configuración del Sistema | Configurar información de marca | RF-140 | El sistema debe permitir a los administradores configurar la información de marca de la tienda: nombre, lema, logo, colores primario y secundario. | RN-140 | Los administradores pueden actualizar el nombre de la tienda (máximo 140 caracteres), lema (máximo 180 caracteres), subir logo (PNG/JPEG/WEBP/SVG, se guarda en `uploads/settings/`), y definir colores primario y secundario en formato hexadecimal (#RRGGBB). Los cambios se reflejan inmediatamente en todo el sitio. El logo se valida por tipo MIME y se renombra con timestamp y hash aleatorio para evitar colisiones. | RI-140 | Nombre de la tienda (store_name, máx 140 caracteres), lema (store_tagline, máx 180 caracteres), ruta del logo (brand_logo, máx 255 caracteres), color primario (primary_color, patrón #RRGGBB), color secundario (secondary_color, patrón #RRGGBB), usuario que realizó el cambio y fecha de última actualización. |
| Configuración del Sistema | Configurar información de soporte | RF-141 | El sistema debe permitir configurar la información de contacto de soporte: correo electrónico, teléfono, WhatsApp, horario de atención y dirección física. | RN-141 | Los administradores pueden configurar correo de soporte (validado como email, máx 180 caracteres), teléfono de soporte (máx 40 caracteres), número de WhatsApp (máx 40 caracteres), horario de atención (máx 120 caracteres) y dirección física (máx 240 caracteres). Esta información se muestra en el pie de página del sitio y en correos de notificación. | RI-141 | Correo de soporte (support_email, validado), teléfono (support_phone), WhatsApp (support_whatsapp), horario (support_hours), dirección física (support_address), categoría de configuración (support), usuario que actualizó y fecha de actualización. |
| Configuración del Sistema | Configurar parámetros operacionales | RF-142 | El sistema debe permitir configurar parámetros operacionales: horas para auto-cancelar órdenes, días de ventana para reseñas, umbral de stock bajo, auto-aprobación de reseñas, moneda y zona horaria. | RN-142 | Los administradores pueden configurar: tiempo en horas para auto-cancelar órdenes pendientes (1-720 horas, default 48), días permitidos para dejar reseña tras compra (1-60 días, default 15), umbral de stock bajo para alertas (1-200 unidades, default 5), activar/desactivar auto-aprobación de reseñas (boolean, default true), código de moneda ISO (3 letras, default COP) y zona horaria para reportes (default America/Bogota). | RI-142 | Horas de auto-cancelación (order_auto_cancel_hours, 1-720), días de ventana de reseñas (order_review_window_days, 1-60), umbral de stock (low_stock_threshold, 1-200), auto-aprobar reseñas (review_auto_approve, boolean), código de moneda (currency_code, 3 letras), zona horaria (analytics_timezone), categoría (operations) y fecha de actualización. |
| Configuración del Sistema | Configurar redes sociales | RF-143 | El sistema debe permitir configurar los enlaces a perfiles de redes sociales: Instagram, Facebook, TikTok y WhatsApp. | RN-143 | Los administradores pueden configurar URLs completas para Instagram, Facebook, TikTok y WhatsApp (máximo 255 caracteres cada una). Estos enlaces se muestran en el pie de página del sitio con iconos correspondientes. Los campos son opcionales y si están vacíos, el icono no se muestra. | RI-143 | URL de Instagram (social_instagram, máx 255), URL de Facebook (social_facebook, máx 255), URL de TikTok (social_tiktok, máx 255), enlace de WhatsApp (social_whatsapp, máx 255), categoría (social), usuario que actualizó y fecha de actualización. |
| Configuración del Sistema | Subir logo de marca | RF-144 | El sistema debe permitir subir el logo de la marca en formatos PNG, JPEG, WEBP o SVG, validando el tipo MIME y almacenándolo de forma segura. | RN-144 | Al subir un logo, el sistema valida que sea PNG, JPEG, WEBP o SVG mediante verificación de tipo MIME (no solo extensión). Si la carpeta `uploads/settings/` no existe, se crea automáticamente con permisos 0775. El archivo se renombra con el patrón `brand_{timestamp}_{random}.{ext}` para evitar colisiones y se mueve a la carpeta de destino. La ruta relativa se guarda en la configuración. | RI-144 | Archivo subido (tipo MIME, tamaño), tipos permitidos (image/png, image/jpeg, image/webp, image/svg+xml), carpeta de destino (uploads/settings/), nombre generado (brand_{timestamp}_{random}.{ext}), ruta relativa almacenada, permisos de carpeta (0775) y resultado de la operación (éxito/error). |
| Diagnóstico del Sistema | Verificar versión de PHP | RF-145 | El sistema debe mostrar la versión actual de PHP instalada en el servidor para verificar compatibilidad. | RN-145 | La herramienta de diagnóstico muestra la versión de PHP usando `PHP_VERSION`. Se recomienda PHP 7.4 o superior para el correcto funcionamiento del sistema. La versión se muestra con un indicador visual de éxito (verde). | RI-145 | Versión de PHP detectada (PHP_VERSION), versión mínima recomendada (7.4), indicador de compatibilidad y fecha/hora de la verificación. |
| Diagnóstico del Sistema | Verificar dependencias de Composer | RF-146 | El sistema debe verificar que las dependencias de Composer estén instaladas, específicamente TCPDF y Dompdf para generación de PDFs. | RN-146 | El diagnóstico verifica la existencia de `vendor/autoload.php` y las clases `TCPDF` y `Dompdf\\Dompdf`. Si Composer no está instalado, muestra instrucciones para ejecutar `composer install`. Para cada librería detectada, muestra su ubicación en el sistema de archivos. Si faltan dependencias, se marca con error rojo. | RI-146 | Existencia de vendor/autoload.php (sí/no), clase TCPDF disponible (sí/no), ubicación de TCPDF, clase Dompdf disponible (sí/no), ubicación de Dompdf, instrucciones de instalación (si aplica) y estado general de dependencias. |
| Diagnóstico del Sistema | Verificar permisos de carpetas | RF-147 | El sistema debe verificar que las carpetas temporales y del proyecto tengan permisos de escritura necesarios para generar archivos. | RN-147 | El diagnóstico verifica permisos de escritura en el directorio temporal del sistema (`sys_get_temp_dir()`) y en el directorio raíz del proyecto. Si el directorio temporal no tiene permisos de escritura, se marca como error crítico (rojo). Si el directorio del proyecto no tiene permisos, se marca como advertencia (naranja) ya que podría afectar la generación de logs. | RI-147 | Ruta del directorio temporal, permisos de escritura del directorio temporal (sí/no), ruta del directorio del proyecto, permisos de escritura del proyecto (sí/no), nivel de criticidad (error/advertencia) y recomendaciones de corrección. |
| Diagnóstico del Sistema | Verificar existencia de logo | RF-148 | El sistema debe verificar la existencia del archivo de logo en la ruta configurada y mostrar su tamaño. | RN-148 | El diagnóstico busca el logo en la ruta `images/logo2.png` (ruta por defecto). Si existe, muestra su tamaño en KB. Si no existe, muestra una advertencia (naranja) indicando que es opcional pero recomendado para PDFs y branding. No es un error crítico. | RI-148 | Ruta del logo verificada (images/logo2.png), existencia del archivo (sí/no), tamaño del archivo en KB (si existe), indicador de criticidad (opcional) y mensaje de estado. |
| Diagnóstico del Sistema | Probar generación de PDFs | RF-149 | El sistema debe realizar pruebas de generación de PDFs con TCPDF y Dompdf para verificar que las librerías funcionan correctamente. | RN-149 | El diagnóstico intenta crear un PDF de prueba con TCPDF (documento A4 con texto simple) y otro con Dompdf (HTML convertido a PDF). Si la generación es exitosa, se marca con éxito (verde). Si falla, se muestra el mensaje de error específico. Incluye enlace para descargar un PDF de prueba si Dompdf funciona correctamente. | RI-149 | Resultado de prueba TCPDF (éxito/error), mensaje de error TCPDF (si aplica), resultado de prueba Dompdf (éxito/error), mensaje de error Dompdf (si aplica), enlace a PDF de prueba descargable y capacidad general de generación de PDFs. |
| Diagnóstico del Sistema | Verificar sesión de usuario | RF-150 | El sistema debe verificar que existe una sesión activa de usuario y mostrar su ID, nombre y rol para diagnóstico. | RN-150 | El diagnóstico verifica si existe `$_SESSION['user_id']`. Si existe, consulta la base de datos para obtener nombre y rol del usuario. Si el rol es 'admin', se marca con éxito (verde). Si no es admin, se marca con error (rojo) ya que el diagnóstico requiere permisos administrativos. Si no hay sesión, se muestra advertencia para iniciar sesión. | RI-150 | ID de usuario en sesión (si existe), nombre del usuario consultado, rol del usuario (admin/customer), validación de permisos administrativos, mensaje de estado y recomendación de acción (si aplica). |
| Diagnóstico del Sistema | Verificar conexión a base de datos | RF-151 | El sistema debe verificar que la conexión a la base de datos está establecida y funcional mediante una consulta de prueba. | RN-151 | El diagnóstico verifica la existencia de la variable `$conn` (objeto PDO). Si existe, ejecuta una consulta de prueba `SELECT COUNT(*) FROM orders` para confirmar conectividad y acceso a tablas. Si la consulta es exitosa, muestra el total de órdenes en la base de datos. Si falla, muestra el mensaje de error específico. | RI-151 | Existencia de conexión ($conn definido), resultado de consulta de prueba (éxito/error), total de registros en tabla orders (si exitoso), mensaje de error de consulta (si aplica) y estado general de conectividad a BD. |
| Diagnóstico del Sistema | Mostrar resumen de diagnóstico | RF-152 | El sistema debe mostrar un resumen final del diagnóstico con acciones recomendadas según los problemas detectados. | RN-152 | Al final del diagnóstico, se muestra un resumen con fondo de color según el estado: rojo si falta Composer (acción crítica: ejecutar `composer install`), naranja si no hay sesión (acción requerida: iniciar sesión como admin), verde si todo está listo (sistema operativo). Incluye la fecha y hora de ejecución del diagnóstico. | RI-152 | Estado general del sistema (crítico/advertencia/listo), acción recomendada principal, comando a ejecutar (si aplica), color de indicador (rojo/naranja/verde), fecha y hora del diagnóstico y mensaje de estado final. |

**FIN DE PARTE 3 - MATRIZ COMPLETA**

---

## Resumen Final

**Total de Requisitos Funcionales**: 169 (RF-001 a RF-152)

**Distribución por Módulo**:
- **Gestión de Usuarios y Accesos**: RF-001 a RF-021 (21 requisitos)
- **Gestión de Productos e Inventario**: RF-022 a RF-042 (21 requisitos)
- **Experiencia de Compra (Tienda)**: RF-043 a RF-067 (25 requisitos)
- **Proceso de Checkout y Pagos**: RF-068 a RF-083 (16 requisitos)
- **Gestión de Órdenes y Postventa**: RF-084 a RF-106 (23 requisitos)
- **Administración y Reportes**: RF-102 a RF-139 (38 requisitos)
- **Marketing y Contenido**: RF-111 a RF-129 (19 requisitos)
- **Configuración del Sistema**: RF-140 a RF-144 (5 requisitos)
- **Diagnóstico del Sistema**: RF-145 a RF-152 (8 requisitos)

**Nuevos Requisitos Agregados**: 28
- Autenticación y Seguridad: 5 (RF-017 a RF-021)
- Reseñas y Preguntas (Usuario): 10 (RF-063 a RF-066, RF-059 a RF-060)
- Reseñas y Preguntas (Admin): 5 (RF-102 a RF-106)
- Configuración del Sitio: 5 (RF-140 a RF-144)
- Diagnóstico del Sistema: 8 (RF-145 a RF-152)
